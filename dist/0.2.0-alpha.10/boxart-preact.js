!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("preact"),require("preact/src/vnode")):"function"==typeof define&&define.amd?define(["preact","preact/src/vnode"],n):"object"==typeof exports?exports.Preact=n(require("preact"),require("preact/src/vnode")):(t.BoxArt=t.BoxArt||{},t.BoxArt.Preact=n(t.preact,t["preact/src/vnode"]))}("undefined"!=typeof self?self:this,function(t,n){return function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=9)}([function(n,e){n.exports=t},function(t,n,e){"use strict";(function(n){var e=function(){function t(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function t(r){function o(t){return Object.setPrototypeOf(t,o.prototype)}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.prototype=Object.create(Function.prototype),o.prototype.constructor=o;var u={},a=i;Object.defineProperties(i,{create:{enumerable:!1,value:function(n,e){return"function"==typeof n?t(function(){return Object.assign({},u,n())},e):t(Object.assign({},u,n),e)}},register:{enumerable:!1,value:function(t,e){if(u[t]=e,"production"!==n.env.NODE_ENV&&u[t]!==e)throw new Error("Cannot register on a frozen animation builder");return a[t]=new o(function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new o(e.call.apply(e,[this].concat(n)))}),o.prototype[t]=new o(function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new o(e.call.apply(e,[this,this].concat(n)))}),a[t]}},cast:{enumerable:!1,value:function(t){return new o(function(){return new o(t.bind())()})}},context:{enumerable:!1,value:function(t){return t(a)}},freeze:{enumerable:!1,value:function(){return Object.freeze(u),Object.freeze(a),Object.freeze(o.prototype),a}},toString:{enumerable:!1,value:function(){return"{"+Object.entries(u).map(function(t){var n=e(t,2),r=n[0],o=n[1];return r+": "+String(o)}).join(",\n")+"}"}}});var c=r;"function"==typeof r&&(c=r());for(var f in c)a.register(f,c[f]);return a};t.exports=r,t.exports.create=r}).call(n,e(11))},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}Object.defineProperty(n,"__esModule",{value:!0});var i,u=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=function(){function t(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=2,f=(i={},o(i,"BEFORE_ITEMS",0),o(i,"AFTER_ITEMS",1),o(i,"ITEMS",2),o(i,"ANIMATE",3),o(i,"DESTROY",4),i),l=function(t,n){var e=t._state,r=t._state;0===r&&1===n||3===r&&3===n?r=c:0===r&&2===n||3===r&&0===n?r=1:1===r&&1===n||r===c&&2===n?r=3:(1===r&&3===n||r===c&&0===n)&&(r=0),r!==e&&(t._state=r,3===e?t.cancelFrame():3===r&&(t.last=t.now(),t._frameId=t.requestFrame()))},s=function(t){var n=a(t,3),e=n[0],r=n[1],o=n[2];this.remove(e,r),this.remove(this._remove,t,o)},h=function(){this._soon=null},v=function(t){t.requestFrame();for(var n=t.cleanup,e=void 0,r=void 0,o=void 0,i=0,u=n.length;i<u;i+=2){e=n[i+0],r=n[i+1];var a=!0,c=!1,f=void 0;try{for(var s,h=t.stages[Symbol.iterator]();!(a=(s=h.next()).done);a=!0){var v=s.value;if("break"===function(n){if(-1!==(o=n.findIndex(function(t,o){return o%2==0&&t===e&&n[o+1]===r})))return n.splice(o,2),t.itemCount-=1,"break"}(v))break}}catch(t){c=!0,f=t}finally{try{!a&&h.return&&h.return()}finally{if(c)throw f}}}if(n.length=0,0===t.itemCount)return void l(t,3);var d=t.now(),y=Math.min((d-t.last)/1e3,.033);t.last=d;var m=!0,p=!1,b=void 0;try{for(var g,w=t.stages[Symbol.iterator]();!(m=(g=w.next()).done);m=!0)for(var _=g.value,O=0;O<_.length;O+=2)try{_[O+0](_[O+1],y)}catch(t){console.error(t?t.stack||t:t)}}catch(t){p=!0,b=t}finally{try{!m&&w.return&&w.return()}finally{if(p)throw b}}},d=function(){function t(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.requestFrame,i=void 0===o?window.requestAnimationFrame:o,u=e.cancelFrame,a=void 0===u?window.cancelAnimationFrame:u,f=e.now,l=void 0===f?Date.now:f;r(this,t),this._state=c,this.itemCount=0,this.stages=[[],[],[],[],[]],this.cleanup=[],this._remove=s.bind(this),this._soonNull=h.bind(this),this.requestFrame=function(){n._frameId=i.call(null,function(){return v(n)})},this.cancelFrame=function(){a.call(null,n._frameId)},this.now=l}return u(t,[{key:"pause",value:function(){l(this,0)}},{key:"resume",value:function(){l(this,1)}},{key:"add",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ANIMATE";0===this.itemCount&&l(this,2),this.itemCount+=1,this.stages[f[e]].push(t,n)}},{key:"remove",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.cleanup.push(t,n)}},{key:"schedule",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"BEFORE_ITEMS";this.add(t,n,e)}},{key:"unschedule",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.remove(t,n)}},{key:"once",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"BEFORE_ITEMS";this.add(t,n,e),this.add(this._remove,[t,n,e],e)}},{key:"soon",value:function(){return this._soon||(this._soon=Promise.resolve().then(this._soonNull)),this._soon}}]),t}();d.stages={BEFORE_ITEMS:"BEFORE_ITEMS",AFTER_ITEMS:"AFTER_ITEMS",ITEMS:"ITEMS",ANIMATE:"ANIMATE",DESTROY:"DESTROY"},"function"==typeof requestAnimationFrame?d.main=new d:d.main=new d({requestFrame:function(t){return setTimeout(t,16)},cancelFrame:function(t){return clearTimeout(t)}}),n.default=d},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":u(n))&&"function"!=typeof n?t:n}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":u(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),c=e(4),f=function(t){return t&&t.__esModule?t:{default:t}}(c),l=function(t){function n(t,e,i){r(this,n);var u=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i));return u.bus=t,u.tree=e,u}return i(n,t),a(n,[{key:"can_",value:function(t,n,e){var r=this.tree.get(n).meta(e);return!!r.can&&(r.can[t]||!1)}},{key:"canEnter",value:function(t,n){return this.can_("enter",t,n)}},{key:"canLeave",value:function(t,n){return this.can_("leave",t,n)}},{key:"didEnter",value:function(t,n){return this.tree.get(t).meta(n).didEnter}},{key:"didLeave",value:function(t,n){return this.tree.get(t).meta(n).didLeave}}]),n}(f.default);n.default=l},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=function(){function t(n){r(this,t),this.matcher=n}return o(t,[{key:"matchNode",value:function(t){if(t.__boxartPreactMatchType)return this.matcher._match.type=t.__boxartPreactMatchType,this.matcher._match.id=t.__boxartPreactMatchId,this.matcher._match.animation=t.__boxartPreactMatchAnimation,!0;if("string"==typeof t.nodeName){var n=t.attributes&&t.attributes.class;if(n&&this.match(n))return t.__boxartPreactMatchType=this.matcher._match.type,t.__boxartPreactMatchId=this.matcher._match.id,t.__boxartPreactMatchAnimation=this.matcher._match.animation,!0}return!1}},{key:"match",value:function(t){return this.matcher.match(t)}},{key:"matchType",value:function(){return this.matcher.matchType()}},{key:"matchId",value:function(){return this.matcher.matchId()}},{key:"matchAnimation",value:function(){return this.matcher.matchAnimation()}}]),t}();n.default=i},function(t,e){t.exports=n},,,,function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":a(n))&&"function"!=typeof n?t:n}function u(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":a(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(n,"__esModule",{value:!0}),n.RunLoop=n.update=n.present=n.animate=void 0;var c=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),f=e(0),l=e(10),s=r(l),h=e(12),v=r(h),d=e(13),y=r(d),m=e(14),p=r(m),b=e(15),g=r(b),w=e(17),_=r(w),O=e(18),S=r(O),x=e(19),j=r(x),k=e(2),E=r(k),M=e(21),T=r(M),P=e(22),B=r(P),A=e(23),I=r(A),N=e(24),C=r(N),R=e(25),F=r(R),L=e(26),q=r(L),D=function(t){function n(){var t;o(this,n);for(var e=arguments.length,r=Array(e),u=0;u<e;u++)r[u]=arguments[u];var a=i(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(r))),c=a.props,f=c.loop,l=c.animations,s=a.bus=new _.default,h={},v=new j.default;Object.keys(l).forEach(function(t){v.add(t,Object.keys(l[t])),h[t.split(" ")[0]]=l[t]});var d=new g.default(l),y=d.create,m=a.manager=new p.default(y,f||E.default.main);new S.default(m,s),a.crawler=new B.default(s,v);var b=new q.default(new C.default(v));return new F.default(a.crawler,s,b,v),new T.default(s,b,v),new I.default(s,b,v),a}return u(n,t),c(n,[{key:"render",value:function(t){var n=t.children;return this.crawler.inject(n[0],"root",!0)}},{key:"getManager",value:function(){return this.manager}},{key:"getAnimated",value:function(t){return this.manager.getAnimated(t.base||t)}}]),n}(f.Component);n.default=D,n.animate=s.default,n.present=v.default,n.update=y.default,n.RunLoop=E.default},function(t,n,e){"use strict";var r=function(){function t(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=e(1);t.exports=o({value:function(t){var n=function(n,e,r,o,i){return t(n,e,r,o,i)};return n.toB=function(n,e,r,o,i,u){var a=void 0;if(t.toB)a=t.toB(n,e,r,o,i,u);else{var c=t(e,r,o,i,u);a=(n(e,r,o,i,u)-c)*Math.min(1,e)+c}return a},n.done=function(n){return(!t.done||t.done(n,state,begin,end,data))&&n>=1},n},lerp:function(t){var n=function(n,e,r,o,i){return t(n,e,r,o,i)};return n.toB=function(n,e,r,o,i,u){var a=t(e,r,o,i,u);return(n(e,r,o,i,u)-a)*Math.min(1,e)+a},n.done=function(t,n,e,r,o){return t>=1},n},union:function(t){var n=function(n,e,r,o,i){var u=!0,a=!1,c=void 0;try{for(var f,l=Object.values(t)[Symbol.iterator]();!(u=(f=l.next()).done);u=!0){(0,f.value)(n,e,r,o,i)}}catch(t){a=!0,c=t}finally{try{!u&&l.return&&l.return()}finally{if(a)throw c}}return e};return n.set=t,n.toB=function(n,e,r,o,i,u){var a=0,c=!0,f=!1,l=void 0;try{for(var s,h=Object.values(t)[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){s.value.toB(n.set[a],e,r,o,i,u),a+=1}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return r},n.done=function(n,e,r,o,i){var u=!0,a=!0,c=!1,f=void 0;try{for(var l,s=Object.values(t)[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var h=l.value;u&&!h.done(n,e,r,o,i)&&(u=!1)}}catch(t){c=!0,f=t}finally{try{!a&&s.return&&s.return()}finally{if(c)throw f}}return u},n},toB:function(t,n){var e=function(n,e,r,o,i){return t(n,e,r,o,i)};return e.toB=function(t,e,r,o,i,u){return n(t,e,r,o,i,u)},e.done=function(e){return(!t.done||t.done(e,state,begin,end,data))&&(!n.done||n.done(e,state,begin,end,data))&&e>=1},e},done:function(t,n){var e=function(n,e,r,o,i){return t(n,e,r,o,i)};return e.toB=function(n,e,r,o,i,u){return t.toB?t.toB(n,e,r,o,i,u):t(e,r,o,i,u)},e.done=function(t,e,r,o,i){return n(t,e,r,o,i)},e},unary:function(t,n){var e=function(e,r,o,i,u){return t(n(e,r,o,i,u))};return e.toB=function(e,r,o,i,u,a){var c=t(n(r,o,i,u,a));return(e(r,o,i,u,a)-c)*Math.min(1,r)+c},e.done=function(t){return t>=1},e},abs:function(t){var n=function(n,e,r,o,i){var u=t(n,e,r,o,i);return Math.abs(u)};return n.toB=function(n,e,r,o,i,u){var a=t(e,r,o,i,u),c=Math.abs(a);return(n(e,r,o,i,u)-c)*Math.min(1,e)+c},n.done=function(t){return t>=1},n},binary:function(t,n,e){var r=function(r,o,i,u,a){return t(n(r,o,i,u,a),e(r,o,i,u,a))};return r.toB=function(r,o,i,u,a,c){var f=t(n(o,i,u,a,c),e(o,i,u,a,c));return(r(o,i,u,a,c)-f)*Math.min(1,o)+f},r.done=function(t){return t>=1},r},add:function(t,n){var e=function(e,r,o,i,u){return t(e,r,o,i,u)+n(e,r,o,i,u)};return e.toB=function(e,r,o,i,u,a){var c=t(r,o,i,u,a),f=n(r,o,i,u,a),l=c+f;return(e(r,o,i,u,a)-l)*Math.min(1,r)+l},e.done=function(t){return t>=1},e},sub:function(t,n){var e=function(e,r,o,i,u){return t(e,r,o,i,u)-n(e,r,o,i,u)};return e.toB=function(e,r,o,i,u,a){var c=t(r,o,i,u,a),f=n(r,o,i,u,a),l=c-f;return(e(r,o,i,u,a)-l)*Math.min(1,r)+l},e.done=function(t){return t>=1},e},mul:function(t,n){var e=function(e,r,o,i,u){return t(e,r,o,i,u)*n(e,r,o,i,u)};return e.toB=function(e,r,o,i,u,a){var c=t(r,o,i,u,a),f=n(r,o,i,u,a),l=c*f;return(e(r,o,i,u,a)-l)*Math.min(1,r)+l},e.done=function(t){return t>=1},e},div:function(t,n){var e=function(e,r,o,i,u){return t(e,r,o,i,u)/n(e,r,o,i,u)};return e.toB=function(e,r,o,i,u,a){var c=t(r,o,i,u,a),f=n(r,o,i,u,a),l=c/f;return(e(r,o,i,u,a)-l)*Math.min(1,r)+l},e.done=function(t){return t>=1},e},mod:function(t,n){var e=function(e,r,o,i,u){return t(e,r,o,i,u)%n(e,r,o,i,u)};return e.toB=function(e,r,o,i,u,a){var c=t(r,o,i,u,a),f=n(r,o,i,u,a),l=c%f;return(e(r,o,i,u,a)-l)*Math.min(1,r)+l},e.done=function(t){return t>=1},e},min:function(t,n){var e=function(e,r,o,i,u){var a=t(e,r,o,i,u),c=n(e,r,o,i,u);return Math.min(a,c)};return e.toB=function(e,r,o,i,u,a){var c=t(r,o,i,u,a),f=n(r,o,i,u,a),l=Math.min(c,f);return(e(r,o,i,u,a)-l)*Math.min(1,r)+l},e.done=function(t){return t>=1},e},max:function(t,n){var e=function(e,r,o,i,u){var a=t(e,r,o,i,u),c=n(e,r,o,i,u);return Math.max(a,c)};return e.toB=function(e,r,o,i,u,a){var c=t(r,o,i,u,a),f=n(r,o,i,u,a),l=Math.max(c,f);return(e(r,o,i,u,a)-l)*Math.min(1,r)+l},e.done=function(t){return t>=1},e},eq:function(t,n){var e=function(e,r,o,i,u){return t(e,r,o,i,u)===n(e,r,o,i,u)};return e.toB=function(e,r,o,i,u,a){var c=t(r,o,i,u,a),f=n(r,o,i,u,a),l=c===f;return(e(r,o,i,u,a)-l)*Math.min(1,r)+l},e.done=function(t){return t>=1},e},ne:function(t,n){var e=function(e,r,o,i,u){return t(e,r,o,i,u)!==n(e,r,o,i,u)};return e.toB=function(e,r,o,i,u,a){var c=t(r,o,i,u,a),f=n(r,o,i,u,a),l=c!==f;return(e(r,o,i,u,a)-l)*Math.min(1,r)+l},e.done=function(t){return t>=1},e},lt:function(t,n){var e=function(e,r,o,i,u){return t(e,r,o,i,u)<n(e,r,o,i,u)};return e.toB=function(e,r,o,i,u,a){var c=t(r,o,i,u,a),f=n(r,o,i,u,a),l=c<f;return(e(r,o,i,u,a)-l)*Math.min(1,r)+l},e.done=function(t){return t>=1},e},lte:function(t,n){var e=function(e,r,o,i,u){return t(e,r,o,i,u)<=n(e,r,o,i,u)};return e.toB=function(e,r,o,i,u,a){var c=t(r,o,i,u,a),f=n(r,o,i,u,a),l=c<=f;return(e(r,o,i,u,a)-l)*Math.min(1,r)+l},e.done=function(t){return t>=1},e},gt:function(t,n){var e=function(e,r,o,i,u){return t(e,r,o,i,u)>n(e,r,o,i,u)};return e.toB=function(e,r,o,i,u,a){var c=t(r,o,i,u,a),f=n(r,o,i,u,a),l=c>f;return(e(r,o,i,u,a)-l)*Math.min(1,r)+l},e.done=function(t){return t>=1},e},gte:function(t,n){var e=function(e,r,o,i,u){return t(e,r,o,i,u)>=n(e,r,o,i,u)};return e.toB=function(e,r,o,i,u,a){var c=t(r,o,i,u,a),f=n(r,o,i,u,a),l=c>=f;return(e(r,o,i,u,a)-l)*Math.min(1,r)+l},e.done=function(t){return t>=1},e},constant:function(t){var n=function(n,e,r,o,i){return t};return n.toB=function(n,e,r,o,i,u){return(n(e,r,o,i,u)-t)*Math.min(1,e)+t},n.done=function(t){return t>=1},n},t:function(){var t=function(t,n,e,r,o){return t};return t.toB=function(t,n,e,r,o,i){return(t(n,e,r,o,i)-n)*Math.min(1,n)+n},t.done=function(t){return t>=1},t},state:function(){var t=function(t,n,e,r,o){return n};return t.toB=function(t,n,e,r,o,i){return(t(n,e,r,o,i)-e)*Math.min(1,n)+e},t.done=function(t){return t>=1},t},at:function(t){var n=function(n,e,r,o,i){return(o-r)*t+r};return n.toB=function(n,e,r,o,i,u){var a=(i-o)*t+o;return(n(e,r,o,i,u)-a)*Math.min(1,e)+a},n.done=function(t,n,e,r,o){return t>=1},n},begin:function(){var t=function(t,n,e,r,o){return 0*(r-e)+e};return t.toB=function(t,n,e,r,o,i){var u=0*(o-r)+r;return(t(n,e,r,o,i)-u)*Math.min(1,n)+u},t.done=function(t,n,e,r,o){return t>=1},t},end:function(){var t=function(t,n,e,r,o){return 1*(r-e)+e};return t.toB=function(t,n,e,r,o,i){var u=1*(o-r)+r;return(t(n,e,r,o,i)-u)*Math.min(1,n)+u},t.done=function(t,n,e,r,o){return t>=1},t},to:function(t,n){var e=function(e,r,o,i,u){return t.toB(n,e,r,o,i,u)};return e.toB=function(n,e,r,o,i,u){return t.toB(n,e,r,o,i,u)},e.done=function(t){return t>=1},e},get:function(t,n){var e=function(e,r,o,i,u){var a=r,c=o,f=i;return n(e,a[t],c[t],f[t],u)};return e.toB=function(e,r,o,i,u,a){var c=o,f=i,l=u,s=n(r,c[t],f[t],l[t],a);return(e(r,o,i,u,a)-s)*Math.min(1,r)+s},e.done=function(t){return t>=1},e},set:function(t,n){var e=function(e,r,o,i,u){return r[t]=n(e,r,o,i,u),r};return e.toB=function(e,r,o,i,u,a){return o[t]=n(r,o,i,u,a),(e(r,o,i,u,a)-o)*Math.min(1,r)+o},e.done=function(t){return t>=1},e},object:function(t){var n=Object.entries(t),e=function(t,e,o,i,u){var a=!0,c=!1,f=void 0;try{for(var l,s=n[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var h=l.value,v=r(h,2),d=v[0],y=v[1];e[d]=y(t,e[d],o[d],i[d],u)}}catch(t){c=!0,f=t}finally{try{!a&&s.return&&s.return()}finally{if(c)throw f}}return e};return e.obj=t,e.toB=function(t,e,o,i,u,a){var c=!0,f=!1,l=void 0;try{for(var s,h=n[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){var v=s.value,d=r(v,2),y=d[0],m=d[1];o[y]=m.toB(t.obj[y],e,o[y],i[y],u[y],a)}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return o},e.done=function(n){return(!t.done||t.done(n,state,begin,end,data))&&n>=1},e},array:function(t){var n=t.toB||t,e=function(n,e,r,o,i){for(var u=e,a=r,c=o,f=0;f<u.length;f++)u[f]=t(n,u[f],a[f],c[f],i);return e};return e.toB=function(t,e,r,o,i,u){return n(t,e,r,o,i,u)},e.done=function(t){return(!n.done||n.done(t,state,begin,end,data))&&t>=1},e},easing:function(t,n){var e=t.toB||t,r=function(e,r,o,i,u){return t(n(e,r,o,i,u),r,o,i,u)};return r.toB=function(t,n,r,o,i,u){return e(t,n,r,o,i,u)},r.done=function(t,e,r,o,i){return n(t,e,r,o,i)>=1},r},easeIn:function(t){var n=t,e=n.toB||t,r=function(n,e,r,o,i){return t(n*n*n,e,r,o,i)};return r.toB=function(t,n,r,o,i,u){return e(t,n,r,o,i,u)},r.done=function(t,n,e,r,o){return t*t*t>=1},r},easeOut:function(t){var n=t,e=n.toB||t,r=function(n,e,r,o,i){return t((n-1)*(n-1)*(n-1)+1,e,r,o,i)};return r.toB=function(t,n,r,o,i,u){return e(t,n,r,o,i,u)},r.done=function(t,n,e,r,o){return(t-1)*(t-1)*(t-1)+1>=1},r},easeInOut:function(t){var n=t,e=n.toB||t,r=function(n,e,r,o,i){var u=void 0;return u=n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1,t(u,e,r,o,i)};return r.toB=function(t,n,r,o,i,u){return e(t,n,r,o,i,u)},r.done=function(t,n,e,r,o){return(t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1)>=1},r},duration:function(t,n){var e=t,r=e.toB||t,o=function(e,r,o,i,u){return t(e/n,r,o,i,u)};return o.toB=function(t,n,e,o,i,u){return r(t,n,e,o,i,u)},o.done=function(t,e,r,o,i){return t/n>=1},o},keyframes:function(t){var n=function(n,e,r,o,i){var u=0,a=!0,c=!1,f=void 0;try{for(var l,s=t[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){u+=l.value.t()}}catch(t){c=!0,f=t}finally{try{!a&&s.return&&s.return()}finally{if(c)throw f}}var h=e,v=Math.max(Math.min(n*u,u),0),d=0,y=!0,m=!1,p=void 0;try{for(var b,g=t[Symbol.iterator]();!(y=(b=g.next()).done);y=!0){var w=b.value;d>0&&v<=0?(h=t[d-1].toB(w,(v+t[d-1].t())/t[d-1].t(),e,r,o,i),v+=1/0):v-=w.t(),d+=1}}catch(t){m=!0,p=t}finally{try{!y&&g.return&&g.return()}finally{if(m)throw p}}return h};return n.toB=function(n,e,r,o,i,u){var a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){a+=s.value.t()}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}var v=r,d=Math.max(Math.min(e*a,a),0),y=void 0;y=0;var m=!0,p=!1,b=void 0;try{for(var g,w=t[Symbol.iterator]();!(m=(g=w.next()).done);m=!0){var _=g.value;d-=_.t(),d<=0&&(v=_.toB(t[y+1]||n,(d+_.t())/_.t(),r,o,i,u),d+=1/0),y+=1}}catch(t){p=!0,b=t}finally{try{!m&&w.return&&w.return()}finally{if(p)throw b}}return v},n},frame:function(t,n){var e=function(e,r,o,i,u){return n(t(e),r,o,i,u)};return e.toB=function(t,e,r,o,i,u){var a=void 0;if(n.toB)a=n.toB(t.fn||t,e,r,o,i,u);else{var c=n(e,r,o,i,u);a=(t(e,r,o,i,u)-c)*Math.min(1,e)+c}return a},e.t=function(){return t.t()},e.fn=n,e.done=function(e){return(!t.done||t.done(e,state,begin,end,data))&&(!n.done||n.done(e,state,begin,end,data))&&e>=1},e},timer:function(t){var n=function(n){return n/t};return n.t=function(){return t},n.toB=null,n.done=null,n},seconds:function(t){var n=function(n){return n/t};return n.t=function(){return t},n.toB=null,n.done=null,n},ms:function(t){var n=t/1e3,e=function(t){return t/n};return e.t=function(){return n},e.toB=null,e.done=null,e},percent:function(t){var n=t/100,e=function(t){return t/n};return e.t=function(){return n},e.toB=null,e.done=null,e},until:function(t,n){var e=t,r=function(n,e,r,o,i){return t(n,e,r,o,i)};return r.toB=function(n,r,o,i,u,a){return e.toB?e.toB(n,r,o,i,u,a):t(r,o,i,u,a)},r.done=function(t,e,r,o,i){return n(t,e,r,o,i)},r},loop:function(t,n){var e=t,r=e.toB||t,o=function(e,r,o,i,u){return t(e/n%1,r,o,i,u)};return o.toB=function(t,n,e,o,i,u){return r(t,n,e,o,i,u)},o.done=function(t,e,r,o,i){return t/n%1>=1},o}})},function(t,n){function e(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===e||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(n){try{return l.call(null,t,0)}catch(n){return l.call(this,t,0)}}}function i(t){if(s===clearTimeout)return clearTimeout(t);if((s===r||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(t);try{return s(t)}catch(n){try{return s.call(null,t)}catch(n){return s.call(this,t)}}}function u(){y&&v&&(y=!1,v.length?d=v.concat(d):m=-1,d.length&&a())}function a(){if(!y){var t=o(u);y=!0;for(var n=d.length;n;){for(v=d,d=[];++m<n;)v&&v[m].run();m=-1,n=d.length}v=null,y=!1,i(t)}}function c(t,n){this.fun=t,this.array=n}function f(){}var l,s,h=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:e}catch(t){l=e}try{s="function"==typeof clearTimeout?clearTimeout:r}catch(t){s=r}}();var v,d=[],y=!1,m=-1;h.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];d.push(new c(t,n)),1!==d.length||y||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.prependListener=f,h.prependOnceListener=f,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,n,e){"use strict";var r=function(){function t(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=e(1);t.exports=o({value:function(t){var n=function(n,e,r){return t(n,e,r)};return n.store=function(n,e,r){return t.store?t.store(n,e,r):e},n.restore=function(n,e,r){return t.restore?t.restore(n,e,r):e},n},union:function(t){var n=function(n,e,r){var o=!0,i=!1,u=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){(0,a.value)(n,e,r)}}catch(t){i=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return n};return n.store=function(n,e,r){var o=!0,i=!1,u=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var f=a.value;f.store&&f.store(n,e,r)}}catch(t){i=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return n},n.restore=function(n,e,r){var o=!0,i=!1,u=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var f=a.value;f.restore&&f.restore(n,e,r)}}catch(t){i=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return n},n},constant:function(t){var n=function(n,e,r){return t};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},key:function(t){var n=function(n,e,r){return e[t]};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},suffix:function(t,n){var e=function(e,r,o){return t(e,r,o)+n};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},em:function(t){var n=function(n,e,r){return t(n,e,r)+"em"};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},percent:function(t){var n=function(n,e,r){return t(n,e,r)+"%"};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},deg:function(t){var n=function(n,e,r){return t(n,e,r)+"deg"};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},rad:function(t){var n=function(n,e,r){return t(n,e,r)+"rad"};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},px:function(t){var n=function(n,e,r){return t(n,e,r)+"px"};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},rem:function(t){var n=function(n,e,r){return t(n,e,r)+"rem"};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},vh:function(t){var n=function(n,e,r){return t(n,e,r)+"vh"};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},vmax:function(t){var n=function(n,e,r){return t(n,e,r)+"vmax"};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},vmin:function(t){var n=function(n,e,r){return t(n,e,r)+"vmin"};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},vw:function(t){var n=function(n,e,r){return t(n,e,r)+"vw"};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},unary:function(t,n){var e=function(e,r,o){return t(n(e,r,o))};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},binary:function(t,n,e){var r=function(r,o,i){return t(n(r,o,i),e(r,o,i))};return r.store=function(t,n,e){return n},r.restore=function(t,n,e){return n},r},abs:function(t){var n=function(n,e,r){var o=t(n,e,r);return Math.abs(o)};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},add:function(t,n){var e=function(e,r,o){return t(e,r,o)+n(e,r,o)};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},sub:function(t,n){var e=function(e,r,o){return t(e,r,o)-n(e,r,o)};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},mul:function(t,n){var e=function(e,r,o){return t(e,r,o)*n(e,r,o)};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},div:function(t,n){var e=function(e,r,o){return t(e,r,o)/n(e,r,o)};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},mod:function(t,n){var e=function(e,r,o){return t(e,r,o)%n(e,r,o)};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},min:function(t,n){var e=function(e,r,o){var i=t(e,r,o),u=n(e,r,o);return Math.min(i,u)};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},max:function(t,n){var e=function(e,r,o){var i=t(e,r,o),u=n(e,r,o);return Math.max(i,u)};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},eq:function(t,n){var e=function(e,r,o){return t(e,r,o)===n(e,r,o)};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},ne:function(t,n){var e=function(e,r,o){return t(e,r,o)!==n(e,r,o)};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},lt:function(t,n){var e=function(e,r,o){return t(e,r,o)<n(e,r,o)};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},lte:function(t,n){var e=function(e,r,o){return t(e,r,o)<=n(e,r,o)};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},gt:function(t,n){var e=function(e,r,o){return t(e,r,o)>n(e,r,o)};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},gte:function(t,n){var e=function(e,r,o){return t(e,r,o)>=n(e,r,o)};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},begin:function(t){var n=function(n,e,r){var o=r;return t(n,o._begin||o.begin,r)};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},end:function(t){var n=function(n,e,r){var o=r;return t(n,o._end||o.end,r)};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},to:function(t,n){var e=function(e,r,o){var i=n(t);return t(e,r,o)-i(e,r,o)};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},over:function(t,n){var e=function(e,r,o){var i=n(t);return t(e,r,o)/i(e,r,o)};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},concat:function(t){var n=function(n,e,r){var o="",i=!0,u=!1,a=void 0;try{for(var c,f=t[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){o+=(0,c.value)(n,e,r)}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return o};return n.store=function(t,n,e){return n},n.restore=function(t,n,e){return n},n},func:function(t,n,e){var r=function(r,o,i){var u="";u=""+t,u+="(";var a="",c=0,f=!0,l=!1,s=void 0;try{for(var h,v=e[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){a+=(0,h.value)(r,o,i),c+=1,c<e.length&&(a+=n)}}catch(t){l=!0,s=t}finally{try{!f&&v.return&&v.return()}finally{if(l)throw s}}return u+=a,u+=")"};return r.store=function(t,n,e){return n},r.restore=function(t,n,e){return n},r},translate:function(t){var n=t,e=function(e,r,o){var i="",u="",a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){u+=(0,s.value)(e,r,o),a+=1,a<n.length&&(u+=", ")}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return i="translate("+u,i+=")"};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},translatex:function(t){var n=t,e=function(e,r,o){var i="",u="",a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){u+=(0,s.value)(e,r,o),a+=1,a<n.length&&(u+=", ")}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return i="translatex("+u,i+=")"};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},translatey:function(t){var n=t,e=function(e,r,o){var i="",u="",a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){u+=(0,s.value)(e,r,o),a+=1,a<n.length&&(u+=", ")}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return i="translatey("+u,i+=")"};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},translatez:function(t){var n=t,e=function(e,r,o){var i="",u="",a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){u+=(0,s.value)(e,r,o),a+=1,a<n.length&&(u+=", ")}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return i="translatez("+u,i+=")"};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},translate3d:function(t){var n=t,e=function(e,r,o){var i="",u="",a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){u+=(0,s.value)(e,r,o),a+=1,a<n.length&&(u+=", ")}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return i="translate3d("+u,i+=")"};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},rotate:function(t){var n=t,e=function(e,r,o){var i="",u="",a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){u+=(0,s.value)(e,r,o),a+=1,a<n.length&&(u+=", ")}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return i="rotate("+u,i+=")"};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},rotatex:function(t){var n=t,e=function(e,r,o){var i="",u="",a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){u+=(0,s.value)(e,r,o),a+=1,a<n.length&&(u+=", ")}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return i="rotatex("+u,i+=")"};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},rotatey:function(t){var n=t,e=function(e,r,o){var i="",u="",a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){u+=(0,s.value)(e,r,o),a+=1,a<n.length&&(u+=", ")}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return i="rotatey("+u,i+=")"};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},rotatez:function(t){var n=t,e=function(e,r,o){var i="",u="",a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){u+=(0,s.value)(e,r,o),a+=1,a<n.length&&(u+=", ")}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return i="rotatez("+u,i+=")"};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},rotate3d:function(t){var n=t,e=function(e,r,o){var i="",u="",a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){u+=(0,s.value)(e,r,o),a+=1,a<n.length&&(u+=", ")}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return i="rotate3d("+u,i+=")"};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},scale:function(t){var n=t,e=function(e,r,o){var i="",u="",a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){u+=(0,s.value)(e,r,o),a+=1,a<n.length&&(u+=", ")}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return i="scale("+u,i+=")"};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},scalex:function(t){var n=t,e=function(e,r,o){var i="",u="",a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){u+=(0,s.value)(e,r,o),a+=1,a<n.length&&(u+=", ")}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return i="scalex("+u,i+=")"};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},scaley:function(t){var n=t,e=function(e,r,o){var i="",u="",a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){u+=(0,s.value)(e,r,o),a+=1,a<n.length&&(u+=", ")}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return i="scaley("+u,i+=")"};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},scalez:function(t){var n=t,e=function(e,r,o){var i="",u="",a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){u+=(0,s.value)(e,r,o),a+=1,a<n.length&&(u+=", ")}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return i="scalez("+u,i+=")"};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},scale3d:function(t){var n=t,e=function(e,r,o){var i="",u="",a=0,c=!0,f=!1,l=void 0;try{for(var s,h=t[Symbol.iterator]();!(c=(s=h.next()).done);c=!0){u+=(0,s.value)(e,r,o),a+=1,a<n.length&&(u+=", ")}}catch(t){f=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(f)throw l}}return i="scale3d("+u,i+=")"};return e.store=function(t,n,e){return n},e.restore=function(t,n,e){return n},e},properties:function(t){var n=Object.entries(t),e=function(t,e,o){var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var l=c.value,s=r(l,2),h=s[0];(0,s[1])(t[h],e,o)}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t};return e.store=function(t,e,o){t=t||{};var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var l=c.value,s=r(l,2),h=s[0],v=s[1];v.store&&(t[h]=v.store(t[h],e[h],o))}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t},e.restore=function(t,e,o){var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var l=c.value,s=r(l,2),h=s[0],v=s[1];v.restore&&v.restore(t[h],e[h],o)}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t},e},fields:function(t){var n=Object.entries(t),e=function(t,e,o){var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var l=c.value,s=r(l,2),h=s[0],v=s[1];t[h]=v(t[h],e,o)}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t};return e.store=function(t,e,o){t=t||{};var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var l=c.value,s=r(l,2),h=s[0],v=s[1];v.store&&(t[h]=v.store(t[h],e[h],o))}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t},e.restore=function(t,e,o){var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var l=c.value,s=r(l,2),h=s[0],v=s[1];v.restore&&(t[h]=v.restore(t[h],e[h],o))}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t},e},style:function(t){var n=Object.entries(t),e=function(t,e,o){var i=t.style,u=!0,a=!1,c=void 0;try{for(var f,l=n[Symbol.iterator]();!(u=(f=l.next()).done);u=!0){var s=f.value,h=r(s,2),v=h[0],d=h[1];i[v]=d(i[v],e,o)}}catch(t){a=!0,c=t}finally{try{!u&&l.return&&l.return()}finally{if(a)throw c}}return t};return e.store=function(t,e,o){t=t||{};var i=t.style,u=e.style;i=t.style||{};var a=!0,c=!1,f=void 0;try{for(var l,s=n[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var h=l.value,v=r(h,2),d=v[0],y=v[1];y.store&&(i[d]=y.store(i[d],u[d],o))}}catch(t){c=!0,f=t}finally{try{!a&&s.return&&s.return()}finally{if(c)throw f}}return t.style=i,t},e.restore=function(t,e,o){var i=t.style,u=e.style,a=!0,c=!1,f=void 0;try{for(var l,s=n[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var h=l.value,v=r(h,2),d=v[0],y=v[1];y.restore&&(i[d]=y.restore(i[d],u[d],o))}}catch(t){c=!0,f=t}finally{try{!a&&s.return&&s.return()}finally{if(c)throw f}}return t},e},elements:function(t){var n=Object.entries(t),e=function(t,e,o){var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var l=c.value,s=r(l,2),h=s[0],v=s[1],d=o._begin||o.begin;o._begin=d[h];var y=o._end||o.end;o._end=y[h],v(o.animated[h].element,e[h],o),o._begin=d,o._end=y}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t};return e.store=function(t,e,o){t=t||{};var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var l=c.value,s=r(l,2),h=s[0],v=s[1];t[h]=v.store(t[h],o.animated[h].element,o)}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t},e.restore=function(t,e,o){var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var l=c.value,s=r(l,2),h=s[0];s[1].restore(o.animated[h].element,e[h],o)}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t},e},elementArrays:function(t){var n=Object.entries(t),e=function(t,e,o){var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){for(var l=c.value,s=r(l,2),h=s[0],v=s[1],d=o._begin||o.begin,y=o._end||o.end,m=o.animated[h].elements,p=e[h],b=d[h],g=y[h],w=0;w<m.length;w++)o._begin=b[w],o._end=g[w],v(m[w],p[w],o);o._begin=d,o._end=y}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t};return e.store=function(t,e,o){t=t||{};var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var l=c.value,s=r(l,2),h=s[0],v=s[1],d=o.animated[h].elements;t[h]=t[h]||[];for(var y=t[h],m=0;m<d.length;m++)y[m]=v.store(y[m],d[m],o);y.length=d.length}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t},e.restore=function(t,e,o){var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0)for(var l=c.value,s=r(l,2),h=s[0],v=s[1],d=o.animated[h].elements,y=e[h],m=0;m<d.length;m++)v.restore(d[m],y[m],o)}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t},e},object:function(t){var n=Object.entries(t),e=function(t,e,o){var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var l=c.value,s=r(l,2),h=s[0],v=s[1],d=o._begin||o.begin;o._begin=d[h];var y=o._end||o.end;o._end=y[h],v(t,e[h],o),o._begin=d,o._end=y}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t};return e.store=function(t,e,o){var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var l=c.value,s=r(l,2),h=(s[0],s[1]);h.store&&h.store(t,e,o)}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t},e.restore=function(t,e,o){var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var l=c.value,s=r(l,2),h=(s[0],s[1]);h.restore&&h.restore(t,e,o)}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t},e}})},function(t,n,e){"use strict";var r=function(){function t(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=e(1);t.exports=o({value:function(t){var n=function(n,e,r){return t(n,e,r)};return n.merge=function(t,n){return void 0===t?n:t},n.copy=function(n,e){return t.copy?t.copy(n,e):e},n},union:function(t){var n=function(n,e,r){var o=!0,i=!1,u=void 0;try{for(var a,c=t[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){n=(0,a.value)(n,e,r)}}catch(t){i=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return n};return n.copy=function(n,e){var r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var c=u.value;n=c.copy?c.copy(n,e):e}}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n},n.merge=function(n,e){var r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var c=u.value;n=c.merge?c.merge(n,e):e}}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n},n},unary:function(t,n){var e=function(e,r,o){return t(n(e,r,o))};return e.merge=function(t,n){return void 0===t?n:t},e.copy=function(t,n){return n},e},binary:function(t,n,e){var r=function(r,o,i){return t(n(r,o,i),e(r,o,i))};return r.merge=function(t,n){return void 0===t?n:t},r.copy=function(t,n){return n},r},abs:function(t){var n=function(n,e,r){var o=t(n,e,r);return Math.abs(o)};return n.merge=function(t,n){return void 0===t?n:t},n.copy=function(t,n){return n},n},add:function(t,n){var e=function(e,r,o){return t(e,r,o)+n(e,r,o)};return e.merge=function(t,n){return void 0===t?n:t},e.copy=function(t,n){return n},e},sub:function(t,n){var e=function(e,r,o){return t(e,r,o)-n(e,r,o)};return e.merge=function(t,n){return void 0===t?n:t},e.copy=function(t,n){return n},e},mul:function(t,n){var e=function(e,r,o){return t(e,r,o)*n(e,r,o)};return e.merge=function(t,n){return void 0===t?n:t},e.copy=function(t,n){return n},e},div:function(t,n){var e=function(e,r,o){return t(e,r,o)/n(e,r,o)};return e.merge=function(t,n){return void 0===t?n:t},e.copy=function(t,n){return n},e},mod:function(t,n){var e=function(e,r,o){return t(e,r,o)%n(e,r,o)};return e.merge=function(t,n){return void 0===t?n:t},e.copy=function(t,n){return n},e},min:function(t,n){var e=function(e,r,o){var i=t(e,r,o),u=n(e,r,o);return Math.min(i,u)};return e.merge=function(t,n){return void 0===t?n:t},e.copy=function(t,n){return n},e},max:function(t,n){var e=function(e,r,o){var i=t(e,r,o),u=n(e,r,o);return Math.max(i,u)};return e.merge=function(t,n){return void 0===t?n:t},e.copy=function(t,n){return n},e},eq:function(t,n){var e=function(e,r,o){return t(e,r,o)===n(e,r,o)};return e.merge=function(t,n){return void 0===t?n:t},e.copy=function(t,n){return n},e},ne:function(t,n){var e=function(e,r,o){return t(e,r,o)!==n(e,r,o)};return e.merge=function(t,n){return void 0===t?n:t},e.copy=function(t,n){return n},e},lt:function(t,n){var e=function(e,r,o){return t(e,r,o)<n(e,r,o)};return e.merge=function(t,n){return void 0===t?n:t},e.copy=function(t,n){return n},e},lte:function(t,n){var e=function(e,r,o){return t(e,r,o)<=n(e,r,o)};return e.merge=function(t,n){return void 0===t?n:t},e.copy=function(t,n){return n},e},gt:function(t,n){var e=function(e,r,o){return t(e,r,o)>n(e,r,o)};return e.merge=function(t,n){return void 0===t?n:t},e.copy=function(t,n){return n},e},gte:function(t,n){var e=function(e,r,o){return t(e,r,o)>=n(e,r,o)};return e.merge=function(t,n){return void 0===t?n:t},e.copy=function(t,n){return n},e},identity:function(){var t=function(t,n,e){return n};return t.merge=function(t,n){return void 0===t?n:t},t.copy=function(t,n){return n},t},constant:function(t){var n=function(n,e,r){return t};return n.merge=function(t,n){return void 0===t?n:t},n.copy=function(t,n){return n},n},property:function(t){var n=function(n,e,r){return e[t]};return n.merge=function(t,n){return void 0===t?n:t},n.copy=function(t,n){return n},n},object:function(t){var n=Object.entries(t),e=function(t,e,o){t=t||{};var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var l=c.value,s=r(l,2),h=s[0],v=s[1];t[h]=v(t[h],e,o)}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t};return e.copy=function(t,e){t=t||{};var o=!0,i=!1,u=void 0;try{for(var a,c=n[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var f=a.value,l=r(f,2),s=l[0],h=l[1];t[s]=h.copy?h.copy(t[s],e[s]):e[s]}}catch(t){i=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return t},e.merge=function(t,e){t=t||{};var o=!0,i=!1,u=void 0;try{for(var a,c=n[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var f=a.value,l=r(f,2),s=l[0],h=l[1];t[s]=h.merge?h.merge(t[s],e[s]):e[s]}}catch(t){i=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return t},e},elements:function(t){var n=Object.entries(t),e=function(t,e,o){t=t||{};var i=o.animated.root.element,u=!0,a=!1,c=void 0;try{for(var f,l=n[Symbol.iterator]();!(u=(f=l.next()).done);u=!0){var s=f.value,h=r(s,2),v=h[0],d=h[1];o.animated[v]=o.animated[v]||{},"root"!==v&&(o.animated[v].element=i.getElementsByClassName(v)[0]),t[v]=d(t[v],o.animated[v].element,o)}}catch(t){a=!0,c=t}finally{try{!u&&l.return&&l.return()}finally{if(a)throw c}}return t};return e.copy=function(t,e){t=t||{};var o=!0,i=!1,u=void 0;try{for(var a,c=n[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var f=a.value,l=r(f,2),s=l[0],h=l[1];t[s]=h.copy?h.copy(t[s],e[s]):e[s]}}catch(t){i=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return t},e.merge=function(t,e){t=t||{};var o=!0,i=!1,u=void 0;try{for(var a,c=n[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var f=a.value,l=r(f,2),s=l[0],h=l[1];t[s]=h.merge?h.merge(t[s],e[s]):e[s]}}catch(t){i=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return t},e},elementArrays:function(t){var n=Object.entries(t),e=function(t,e,o){t=t||{};var i=o.animated.root.element,u=!0,a=!1,c=void 0;try{for(var f,l=n[Symbol.iterator]();!(u=(f=l.next()).done);u=!0){var s=f.value,h=r(s,2),v=h[0],d=h[1];o.animated[v]=o.animated[v]||{},o.animated[v].elements=o.animated[v].elements||[],o.animated[v].elements.length=0;var y=o.animated[v].elements,m=i.getElementsByClassName(v),p=t[v]||[];p.length=m.length;for(var b=0;b<p.length;b++)y.push(m[b]),p[b]=d(p[b],y[b],o);t[v]=p}}catch(t){a=!0,c=t}finally{try{!u&&l.return&&l.return()}finally{if(a)throw c}}return t};return e.merge=function(t,e){t=t||{};var o=!0,i=!1,u=void 0;try{for(var a,c=n[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var f=a.value,l=r(f,2),s=l[0],h=l[1],v=t[s]||[],d=e[s]||[];v.length=d.length;for(var y=0;y<d.length;y++)v[y]=h.merge?h.merge(v[y],d[y]):d[y];v[s]=v}}catch(t){i=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return t},e.copy=function(t,e){t=t||{};var o=!0,i=!1,u=void 0;try{for(var a,c=n[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var f=a.value,l=r(f,2),s=l[0],h=l[1],v=t[s]||[],d=e[s]||[];v.length=d.length;for(var y=0;y<d.length;y++)v[y]=h.copy?h.copy(v[y],d[y]):d[y];t[s]=v}}catch(t){i=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return t},e},properties:function(t){var n=Object.entries(t),e=function(t,e,o){t=t||{};var i=!0,u=!1,a=void 0;try{for(var c,f=n[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var l=c.value,s=r(l,2),h=s[0],v=s[1];t[h]=v(t,e[h],o)}}catch(t){u=!0,a=t}finally{try{!i&&f.return&&f.return()}finally{if(u)throw a}}return t};return e.copy=function(t,e){t=t||{};var o=!0,i=!1,u=void 0;try{for(var a,c=n[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var f=a.value,l=r(f,2),s=l[0],h=l[1];t[s]=h.copy?h.copy(t[s],e[s]):e[s]}}catch(t){i=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return t},e.merge=function(t,e){t=t||{};var o=!0,i=!1,u=void 0;try{for(var a,c=n[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var f=a.value,l=r(f,2),s=l[0],h=l[1];t[s]=h.merge?h.merge(t[s],e[s]):e[s]}}catch(t){i=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw u}}return t},e},asElement:function(t,n){var e=function(e,r,o){return n(e,t(e,r,o),o)};return e.copy=function(t,e){return n.copy?n.copy(t,e):e},e.merge=function(t,e){return n.merge?n.merge(t,e):e},e},rect:function(){var t=function(t,n,e){var r=n.getBoundingClientRect(),o=t||{};return o.left=r.left+n.scrollLeft,o.top=r.top+n.scrollTop,o.right=r.right+n.scrollLeft,o.bottom=r.bottom+n.scrollTop,o.width=r.width,o.height=r.height,o};return t.merge=function(t,n){return t=t||{},t.left=void 0!==t.left?t.left:n.left,t.top=void 0!==t.top?t.top:n.top,t.right=void 0!==t.right?t.right:n.right,t.bottom=void 0!==t.bottom?t.bottom:n.bottom,t.width=void 0!==t.width?t.width:n.width,t.height=void 0!==t.height?t.height:n.height,t},t.copy=function(t,n){var e=t||{},r=n||{};return e.left=r.left,e.top=r.top,e.right=r.right,e.bottom=r.bottom,e.width=r.width,e.height=r.height,e},t},should:function(t,n){var e=t,r=function(n,e,r){return t(n,e,r)};r.merge=function(t,n){return void 0===t?n:t},r.copy=function(t,n){return e.copy?e.copy(t,n):n};var o=r;return o.should=function(t,e){return n(t,e)},o}})},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=e(2),u=function(t){return t&&t.__esModule?t:{default:t}}(i),a=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.main;r(this,t),this.factory=n,this.loop=e,this.states={},this.elementToId=new Map}return o(t,[{key:"get",value:function(t,n){var e=this.states[n];return e||(e=this.states[n]=this.factory(t)),e}},{key:"set",value:function(t,n,e,r){var o=this.get(t,n);return o.set(e||"default",r),o}},{key:"delete",value:function(t,n){this.states[n]&&(this.states[n].unschedule(),this.states[n]=null)}},{key:"setElement",value:function(t,n,e){var r=this.get(t,n);if(r){this.elementToId.set(e,n);var o=r.data.animated||{root:{element:null}};o.root.element=e,r.schedule(o,this.loop)}}},{key:"getAnimatedState",value:function(t){this.states[this.elementToId.get(t)]}},{key:"getAnimated",value:function(t){var n=this.getAnimatedState(t);return n&&n.data.animated}}]),t}();n.default=a},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=e(16),u=function(t){return t&&t.__esModule?t:{default:t}}(i),a=function(){function t(n){r(this,t),this.animations=n,this.create=this.create.bind(this)}return o(t,[{key:"create",value:function(t){return new u.default(this.animations[t])}}]),t}();n.default=a},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=function(t,n){return t};i.copy=function(t){return t},i.merge=function(t){return t};var u=function(){};u.done=function(){return!0};var a=function(){};a.store=function(){},a.restore=function(){};var c={update:i,animate:u,present:a},f=function(){},l=0,s="__init__",h=function(t){t.loop.soon().then(function(){return d(t,3)})},v=function(t){t.loop.soon().then(function(){return y(t,0)})},d=function(t,n){var e=t.transitionState,r=0;if((3===e||7===e)&&3===n){3===e&&(t.animation={});var o=t.get()||"default",f=t.animations.default||c,s=t.animations[o]||f,d=t.animation.update=s.update||f.update||i;t.animation.animate=s.animate||f.animate||u;var m=t.animation.present=s.present||f.present||a,p=t.data,b=p.animated.root;return p.lastT=p.t,p.t=0,p.end=d(p.end,b.element,p),3===t.transitionState?(p.state=d.copy(p.state,p.end),p.begin=d.copy(p.begin,p.end)):(p.state=d.merge(p.state,p.end),p.begin=d.merge(p.begin,p.end)),p.store=m.store(p.store,b.element,p),t.loop.add(y,t),t.transitionState=8,void v(t)}if(e===l)0===n?e=1:1===n&&(e=2);else if(1===e)1===n&&(r=2,e=3);else if(2===e)0===n?(r=2,e=3):2===n&&(e=l);else if(4===e)0===n?e=5:1===n&&(e=6);else if(5===e)0===n?r=1:1===n&&(r=2,e=7);else if(6===e)0===n?(r=2,e=7):2===n&&(e=4);else if(7===e)0===n?r=1:2===n&&(e=5);else if(8===e){if(0===n||4===n||2===n){2!==n&&t.resolve();var g=t.data;t.animation.present.restore(g.animated.root.element,g.store,g),t.animation.update.copy(g.begin,g.state),t.loop.remove(y,t)}0===n?(r=2,e=7):2===n?e=5:4===n&&(e=6)}0!==r&&(1===r?t.resolve():2===r&&h(t)),e!==t.transitionState&&(t.transitionState=e)},y=function(t,n){if(8===t.transitionState){var e=t.data,r=t.animation,o=r.animate,i=r.present;e.t+=n,o(e.t,e.state,e.begin,e.end,e),o.done&&o.done(e.t,e.state,e.begin,e.end,e)?d(t,4):i(e.animated.root.element,e.state,e)}},m=function(){function t(n){r(this,t),this.state=s,this.className="",this.transitionState=l,this.animation=null,this.animations=n,this.data={t:0,lastT:0,store:null,state:null,begin:null,end:null,animated:null},this.resolve=f}return o(t,[{key:"get",value:function(){return this.state}},{key:"set",value:function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;this.className!==n&&(this.state=t,this.className=n,d(this,0),this.resolve=e)}},{key:"setThen",value:function(t,n){var e=this;return new Promise(function(r){return e.set(t,n,r)})}},{key:"schedule",value:function(t,n){this.data.animated=t,this.loop=n,d(this,1)}},{key:"unschedule",value:function(){d(this,2),this.data.animated=null}},{key:"transitionStep",value:function(t){d(this,t)}},{key:"step",value:function(t){y(this,t)}}]),t}();n.default=m},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=function(){function t(){r(this,t),this.set=[]}return i(t,[{key:"values",value:function(){return this.set}},{key:"add",value:function(t){this.set.push(t)}},{key:"delete",value:function(t){var n=this.set.indexOf(t);-1!==n&&this.set.splice(n,1)}}]),t}(),a=function(){function t(){r(this,t),this.bound={},this.sets={}}return i(t,[{key:"setFor",value:function(t,n){return this.sets[t]=this.sets[t]||{},"*"===n?this.sets[t].__all__=this.sets[t].__all__||new u:this.sets[t][n]=this.sets[t][n]||new u}},{key:"bind",value:function(t,n){if(!this.bound[t]){var e=t.split(":"),r=o(e,2),i=r[0],u=r[1],a=this.setFor(i,"*"),c=this.setFor(i,u);if(3===n){var f=a.values(),l=c.values();this.bound[t]=function(t,n,e){for(var r=0,o=f.length;r<o;)f[r++](u,t,n,e);for(var i=0,a=l.length;i<a;)l[i++](t,n,e)}}else this.bound[t]=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];var r=!0,o=!1,i=void 0;try{for(var f,l=a.values()[Symbol.iterator]();!(r=(f=l.next()).done);r=!0){f.value.apply(void 0,[u].concat(n))}}catch(t){o=!0,i=t}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}var s=!0,h=!1,v=void 0;try{for(var d,y=c.values()[Symbol.iterator]();!(s=(d=y.next()).done);s=!0){d.value.apply(void 0,n)}}catch(t){h=!0,v=t}finally{try{!s&&y.return&&y.return()}finally{if(h)throw v}}}}return this.bound[t]}},{key:"on",value:function(t,n){var e=t.split(":"),r=o(e,2),i=r[0],u=r[1],a=this.setFor(i,u);return a.add(n),function(){return a.delete(n)}}}]),t}();n.default=a},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=function(){function t(n,e){r(this,t),this.manager=n,this.bus=e,this.stateBegin=e.bind("state:begin",3),this.stateEnd=e.bind("state:end",3),e.on("state:change",this.set.bind(this)),e.on("state:destroy",n.delete.bind(n)),e.on("element:create",n.setElement.bind(n)),e.on("element:update",n.setElement.bind(n)),e.on("element:destroy",n.delete.bind(n))}return o(t,[{key:"set",value:function(t,n,e,r){var o=this,i=this.manager.set(t,n,e,r);this.stateBegin(t,n,e),i.resolve=function(){return o.stateEnd(t,n,e)}}}]),t}();n.default=i},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=e(20),a=function(){function t(){r(this,t),this.patterns=new u,this.results={},this.idToTypes={},this._match={last:"",type:"",id:"",animation:""}}return i(t,[{key:"add",value:function(t,n){var e=t.split(" "),r=o(e,2),i=r[0],a=r[1];a?(a=a.replace("{type}",i).replace("{id}","*"),-1===a.indexOf("*")&&(a+="*")):a=i+"*",this.patterns.add(i),this.patterns.add(a),this.idToTypes[a]=i;var c={id:(new u).add(a),animationNames:n,hasAnimation:{},animations:new u};n.forEach(function(t){c.animations.add(t.replace("{type}",i)),c.hasAnimation[t]=!0}),c.animations.add(a),this.results[i]=c}},{key:"match",value:function(t){if(this._match.last===t)return Boolean(this.results[this._match.type]);this._match.last=t;var n=this._match.type=this.patterns.search(t);if(!n)return this._match.animation=null,this._match.id=null,!1;var e=void 0,r=void 0,o=void 0,i=this.patterns.begin,u=this.patterns.end;return n&&n.endsWith("*")?(n=this.idToTypes[n],o=this.results[n],r=o.animations.search(t,i,u+1)):(o=this.results[n],r=o.animations.search(t,u)),r?r.endsWith("*")?(e=t.substring(o.animations.begin,o.animations.end),(r=o.animations.search(t,o.animations.end))||(r=o.animations.search(t,0,i+1))):e||(o.id.search(t,o.animations.end)?e=t.substring(o.id.begin,o.id.end):o.id.search(t,0,i+1)&&(e=t.substring(o.id.begin,o.id.end))):(r=o.animations.search(t,0,i+1),r?r.endsWith("*")?(e=t.substring(o.animations.begin,o.animations.end),r=o.animations.search(t,o.animations.end,i+1)):e||o.id.search(t,o.animations.end,i+1)&&(e=t.substring(o.id.begin,o.id.end)):e||o.id.search(t,0,i+1)&&(e=t.substring(o.id.begin,o.id.end))),this._match.type=n,this._match.animation=r||"default",this._match.id=e||n,!0}},{key:"matchType",value:function(){return this._match.type}},{key:"matchAnimation",value:function(){return this._match.animation}},{key:"matchId",value:function(){return this._match.id}},{key:"matchHasAnimation",value:function(t){return this.results[this.matchType()].hasAnimation[t]||!1}}]),t}();n.default=a},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),u=function(){function t(){r(this,t),this.patterns=[],this._dirty=!0,this.code=[],this.answers=[]}return i(t,[{key:"add",value:function(t){return this.patterns.push({pattern:t,chars:t+"\0",codes:(t+"\0").split("").map(function(t){return t.charCodeAt(0)})}),this._dirty=!0,this}},{key:"rebuild",value:function(){for(var t={},n=[],e=[],r=0;r<this.patterns.length;r++){for(var i=this.patterns[r],u=t,a=0;a<i.codes.length-1;a++){var c=i.codes[a];if(42!==c)u=u[c]=u[c]||{};else for(var f={},l=[[u,Object.keys(u),0]];l.length;){var s=l.pop();u=s[0];var h=s[1],v=s[2];if(v<h.length){var d=u[h[v]];l.push([u,h,v+1]),d.pattern||l.push([d,Object.keys(d),0])}else u=u[42]=f}}u[32]=i,u[0]=i}for(var y=n.length,m=Object.entries(t),p=0;p<m.length;p++)n[y++]=m[p][0],n[y++]=m[p][1];n[y++]=-1,n[y++]=-1;for(var b=0;b<n.length;){var g=n[b+1];if(-1!==g)if(g.pattern)n[b+1]=-e.length,e.push(g.pattern),b+=2;else{n[b+1]=y,m=Object.entries(g),m.sort(function(t,n){var e=o(t,1),r=e[0],i=o(n,1),u=i[0];return 42===Number(r)?1:42===Number(u)?-1:Number(r)-Number(u)});for(var w=0;w<m.length;w++)n[y++]=m[w][0],n[y++]=m[w][1];n[y++]=-1,n[y++]=-1,b+=2}else b+=2}this.code=new Int32Array(n),this.answers=e,this._dirty=!1}},{key:"search",value:function(t,n,e){if(this._dirty){if(0===this.patterns.length)return!1;this.rebuild()}this.begin=n||0,this.end=n||0;for(var r=t+"\0",o=this.code,i=0,u=n||0,a=e||r.length;u<a;++u){var c=r.charCodeAt(u);if(o[i]===c){if(o[i+1]<=0)return this.end=u,this.answers[-o[i+1]];i=o[i+1]}else if(42===o[i]&&32!==c&&0!==c){for(i=o[i+1];++u<a&&32!==(c=r.charCodeAt(u))&&0!==c;);--u}else if(--u,i+=2,-1===o[i]){for(i=0;++u<a&&32!==r.charCodeAt(u););this.begin=u+1}}return!1}}]),t}();t.exports=u},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":u(n))&&"function"!=typeof n?t:n}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":u(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(n,"__esModule",{value:!0});var a=e(3),c=function(t){return t&&t.__esModule?t:{default:t}}(a),f=function(t){function n(t,e,i){r(this,n);var u=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e,i));return u.bus=t,u.components={},u.stateChange=u.bus.bind("state:change",3),u}return i(n,t),n}(c.default);n.default=f},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":u(n))&&"function"!=typeof n?t:n}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":u(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),c=(e(0),e(5)),f=e(4),l=function(t){return t&&t.__esModule?t:{default:t}}(f),s=c.VNode,h=function(t){return t.hooked},v=function(t){function n(t,e){r(this,n);var i=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return i.bus=t,i.change=t.bind("state:change",4),i.create=t.bind("element:create",3),i.update=t.bind("element:update",3),i.destroy=t.bind("element:destroy",2),i.componentCreate=t.bind("component:create",3),i.componentUpdate=t.bind("component:update",3),i.componentDestroy=t.bind("component:destroy",2),i.elementClaims={},i.statelessMap=new WeakMap,i}return i(n,t),a(n,[{key:"children",value:function(t,n){if(!t||!t.length)return t;for(var e=t,r=0,o=e.length;r<o;r++){var i=e[r],u=i,a=n+"."+(this.matchNode(u)&&this.matchId()||u.key||r),c=this.inject(i,a);c!==i&&(e===t&&(e=t.slice()),e[r]=c)}return e}},{key:"inject",value:function(t,n,e){var r=this;if(!t)return t;if("function"==typeof t.nodeName){if(t.nodeName.prototype&&t.nodeName.prototype.render){if(t.attributes&&t.attributes.ref){var o=t.attributes&&t.attributes.ref;return this.cloneStateful(t,function(t){o(t),r.statefulHook(t,n)})}return this.cloneStateful(t,function(t){r.statefulHook(t,n)})}return this.cloneStateless(t,n)}var i=t.children,u=this.children(i,n);if(t.attributes&&t.attributes.class&&this.matchNode(t)){var a=this.matcher._match.type,c=this.matcher._match.id;this.change(a,c,this.matcher._match.animation,n+" "+t.attributes.class);var f=this.elementClaims[c];this.elementClaims[c]=function(){return l=2,!0};var l=f&&f()?1:0;if(t.attributes&&t.attributes.ref){var s=t.attributes&&t.attributes.ref;return this.cloneElement(t,u,function(t){s(t),t?l=r.elementRef(l,a,c,t):Promise.resolve().then(function(){l=r.elementRef(l,a,c,t)})})}return this.cloneElement(t,u,function(t){t?l=r.elementRef(l,a,c,t):Promise.resolve().then(function(){l=r.elementRef(l,a,c,t)})})}return u!==i?this.cloneElement(t,u):t}},{key:"cloneStateful",value:function(t,n){var e=new s;e.nodeName=t.nodeName,e.children=t.children,e.attributes=Object.assign({},t.attributes),e.attributes.ref=n,e.key=t.key;var r=new s;return r.nodeName=h,r.children=null,r.attributes={key:t.key,hooked:e,nodeName:t.nodeName},r.key=t.key,r}},{key:"statefulHook",value:function(t,n){var e=this;if(t&&t.render&&!t.render.crawled){var r=n+"."+t.constructor.name,o=t.render;t.render=function(n,i,u){return e.inject(o.call(t,n,i,u),r,!0)},t.render.crawled=!0}}},{key:"cloneStateless",value:function(t,n){var e=this,r=new s,o=n+"."+t.nodeName.name;if(r.nodeName=this.statelessMap.get(t.nodeName),!r.nodeName){var i=function(t,n){var r=t.props,o=t.nodeName,i=t.path;return e.statelessHook(o,i,r,n)};r.nodeName=i,this.statelessMap.set(t.nodeName,i)}return r.children=t.children,r.attributes={props:t.children?Object.assign({},t.attributes,{children:t.children}):t.attributes,nodeName:t.nodeName,path:o},r.key=t.key,r}},{key:"statelessHook",value:function(t,n,e,r){return this.inject(t(e,r),n,!0)}},{key:"cloneElement",value:function(t,n,e){var r=new s;return r.nodeName=t.nodeName,r.children=n,r.attributes=Object.assign({},t.attributes),e&&(r.attributes.ref=e),r.key=t.key,r}},{key:"elementRef",value:function(t,n,e,r){switch(t){case 0:return this.create(n,e,r),1;case 1:return r?(this.update(n,e,r),1):(this.elementClaims[e]=null,this.destroy(n,e),2);default:return 2}}}]),n}(l.default);n.default=v},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":a(n))&&"function"!=typeof n?t:n}function u(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":a(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(n,"__esModule",{value:!0});var c=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),f=e(3),l=r(f),s=e(2),h=r(s),v=function(){return!1},d=function(t){function n(t,e,r,u){o(this,n);var a=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e,r));return a.loop=u||h.default.main,a.alive={},a.left={},a.stateChange=a.bus.bind("state:change",3),a.stateDestroy=a.bus.bind("state:destroy",2),a.bus.on("state:begin",a.onStateBegin.bind(a)),a.bus.on("state:end",a.onStateEnd.bind(a)),a.bus.on("element:create",a.onElementCreate.bind(a)),a.bus.on("element:update",a.onElementUpdate.bind(a)),a.bus.on("element:destroy",a.onElementDestroy.bind(a)),a}return u(n,t),c(n,[{key:"onStateBegin",value:function(t,n,e){this.alive[n]&&this.alive[n](!0)}},{key:"onStateEnd",value:function(t,n,e){var r=this;"leave"===e&&this.tree.element(n)&&Promise.race([new Promise(function(t){r.alive[n]=t}),this.loop.soon().then(v)]).then(function(e){r.alive[n]=null,e||(r.tree.element(n).remove(n),r.stateDestroy(t,n))})}},{key:"onElementCreate",value:function(t,n,e){var r=this.tree.element(n);if(r){var o=r.meta(n);o.can=this.matcher.results[t].hasAnimation,!o.didEnter&&o.can.enter&&r.count>1&&this.stateChange(t,n,"enter"),o.didEnter=!0}}},{key:"onElementUpdate",value:function(t,n,e){var r=this.tree.element(n);if(r){var o=r.meta(n);o.can||(o.can=this.matcher.results[t].hasAnimation),o.didLeave?(o.leaving||(o._leaving=e.className,o.leaving=e.className+" leave",this.left[n]=[o.leaving,e.className]),e.className=o.leaving,this.stateChange(t,n,"leave")):this.left[n]&&(e.className===this.left[n][0]&&(e.className=this.left[n][1]),this.left[n]=null,o._leaving=null,o.leaving=null),!o.didEnter&&o.can.enter&&r.count>1&&this.stateChange(t,n,"enter"),o.didEnter=!0}}},{key:"onElementDestroy",value:function(t,n,e){this.left[n]&&(this.left[n]=null),this.tree.element(n)&&this.tree.element(n).remove(n)}}]),n}(l.default);n.default=d},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":u(n))&&"function"!=typeof n?t:n}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":u(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),c=e(4),f=function(t){return t&&t.__esModule?t:{default:t}}(c),l=function(t){function n(t){r(this,n);var e=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.isElement=e.isElement.bind(e),e.nodeId=e.nodeId.bind(e),e}return i(n,t),a(n,[{key:"isElement",value:function(t){return"string"==typeof t.nodeName}},{key:"nodeId",value:function(t){return"string"!=typeof t.nodeName?t.key:t.__boxartPreactMatchId?t.__boxartPreactMatchId:this.matchNode(t)?(t.__boxartPreactMatchId=this.matchId(),t.__boxartPreactMatchId):void 0}}]),n}(f.default);n.default=l},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":u(n))&&"function"!=typeof n?t:n}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":u(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),c=e(3),f=function(t){return t&&t.__esModule?t:{default:t}}(c),l=function(t){function n(t,e,i,u){r(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i,u));a.nextDest=[],a.current=[],a.leaving=[];var c=t.inject.bind(t);t.inject=a.inject.bind(a,c);var f=t.children.bind(t);return t.children=a.children.bind(a,f),a}return i(n,t),a(n,[{key:"inject",value:function(t,n,e,r){if(r){var o=this.tree.get(e),i=o.parentBranch,u=o.parentKey,a=this.tree.idGen.nodeId(n);i._meta[a||u]&&i._meta[u]||this.tree.remove(e),i.root(u,a,n);var c=i.parentKey,f=i.parentBranch;f._meta[c]=i._meta[u]=i.meta(a),i.count=f.count}return t(n,e)}},{key:"children",value:function(t,n,e){var r=this.tree.get(e);r.update(n,this.current,this.leaving),r.count=(r.count||0)+1;for(var o=0;o<this.current.length;++o)r.meta(this.current[o]).didLeave=!1;for(var i=0;i<this.leaving.length;++i)r.meta(this.leaving[i]).didLeave||(this.canLeave(e,this.leaving[i])?r.meta(this.leaving[i]).didLeave=!0:r.remove(this.leaving[i]));var u=r.missedNodes(n,this.nextDest);return u===this.nextDest&&(this.nextDest=[]),t(u,e)}}]),n}(f.default);n.default=l},function(t,n,e){"use strict";function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),i=e(27),u=function(t){return t&&t.__esModule?t:{default:t}}(i),a=function(){function t(n,e,o){r(this,t);var i=e.lastIndexOf(".");this.parentPath=e.substring(0,i),this.parentKey=e.substring(i+1),this.path=e,this.tree=n,this.order=[],this.missed=null,this._tmpOrder=[],this._tmp2Order=[],this._dirtyOrder=!1,this.mustAddNodes=!1,this.indices=[],this.nodes={},this._meta={},this.isElement=o.isElement,this.nodeId=o.nodeId}return o(t,[{key:"meta",value:function(t){return this._meta[t]||(this._meta[t]={}),this._meta[t]}},{key:"remove",value:function(t){if(this.nodes[t]){var n=this.nodes[t];if(this.nodes[t]=null,this._meta[t]=null,this._dirtyOrder=!0,n&&this.isElement(n)&&this.nodeId(n)&&this.tree.setElementPath(t,null),this.isRoot){for(var e=0;e<this.order.length;++e)this.tree.remove(this.path+"."+this.order[e]);this.tree.remove(this.path,this.isRoot)}else this.tree.remove(this.path+"."+t)}}},{key:"root",value:function(t,n,e){if(this._updateOrder(),!this.nodes[n||t]||!this.nodes[t])for(var r=0;r<this.order.length;++r)this.remove(this.order[r]);this.nodes[n||t]=e,this.nodes[t]=e,this.order.length=0,this.order[0]=t,this.order[1]=n,this.isRoot=!0,this.isElement(e)&&n&&this.tree.setElementPath(n,this.path)}},{key:"_updateOrder",value:function(){if(this._dirtyOrder){for(var t=this.order.length-1;t>=0;--t)this.nodes[this.order[t]]||this.order.splice(t,1);this._dirtyOrder=!1}}},{key:"update",value:function(t,n,e){n.length=0,e.length=0,this._tmpOrder.length=0,this.missed=e,this._updateOrder();var r=this._tmpOrder;if(t)for(var o=0;o<t.length;++o){var i=this.nodeId(t[o]);i?(n[o]=i,r[o]=i,this.nodes[i]=t[o],this.isElement(t[o])&&this.tree.setElementPath(i,this.path)):(n[o]=o,r[o]=o,this.nodes[o]=t[o])}var a=(0,u.default)(this.order,r,this._tmp2Order,e);if(a===this._tmpOrder){var c=this._tmpOrder;this._tmpOrder=this.order,this.order=c}else if(a===this._tmp2Order){var f=this._tmp2Order;this._tmp2Order=this.order,this.order=f}}},{key:"missedNodes",value:function(t,n){for(var e=this.missed.length-1;e>=0;--e)this.nodes[this.missed[e]]||this.missed.splice(e,1);if(0===this.missed.length)return t;this._updateOrder(),n.length=this.order.length;for(var r=0;r<this.order.length;++r)n[r]=this.nodes[this.order[r]];return n}}]),t}(),c=function(){function t(n){r(this,t),this.idGen=n,this.lists={},this.elementPaths={}}return o(t,[{key:"get",value:function(t){return this.lists[t]||(this.lists[t]=new a(this,t,this.idGen),this.lists[t]&&(this.lists[t].parentBranch=this.get(this.lists[t].parentPath))),this.lists[t]}},{key:"element",value:function(t){return this.lists[this.elementPaths[t]]}},{key:"remove",value:function(t,n){if(this.lists[t])for(var e=this.lists[t],r=e.order,o=0,i=r.length;o<i;++o)e.nodes[r[o]]&&e.remove(r[o]);var u=t.substring(0,t.lastIndexOf(".")),a=t.substring(t.lastIndexOf(".")+1);n&&this.lists[u]&&this.lists[u].nodes[a]&&this.lists[u].remove(a),this.lists[t]=null}},{key:"setElementPath",value:function(t,n){this.element(t)&&this.elementPaths[t]!==n&&this.element(t).nodes[t]&&this.element(t).remove(t),this.elementPaths[t]=n}}]),t}();n.default=c},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={},o=[],i=function(t,n){if(t.length===n.length){for(var e=!0,r=0;e&&r<t.length;++r)e=t[r]===n[r];return e}return!1},u=function(t,n){for(var e=0,o=t.length;e<o;++e)r[t[e]]=-1;for(var i=0,u=n.length;i<u;++i)r[n[i]]=i},a=function(t,n){for(var e=!0,o=0;e&&o<t.length;++o)e=-1!==r[t[o]];return e},c=function(t,n,e,i){var u=e||o;u.length=0;for(var a=0;a<n.length;a++)u.push(n[a]);i.unshift(t[t.length-1]),u.unshift(t[t.length-1]);for(var c=t.length-2;c>-1;--c)-1===r[t[c]]&&(i.unshift(t[c]),u.unshift(t[c]));return u},f=function(t,n,e,i,u){var a=e||o;a.length=0;for(var c=0;c<n.length;c++)a.push(n[c]);for(var f=t.length-2;f>-1;--f)if(-1===r[t[f]]){var l=void 0;for(l=f+1;-1===r[t[l]]||r[t[l]]>u;++l);u=r[t[l]],i.unshift(t[f]),a.splice(u,0,t[f])}return a},l=function(t,n,e,o){if(0===t.length)return n;if(i(t,n))return t;if(u(t,n),a(t))return n;var l=r[t[t.length-1]];return-1===l?c(t,n,e,o):f(t,n,e,o,l)};n.default=l}])});