!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MutationObserver=e():(t.BoxArt=t.BoxArt||{},t.BoxArt.MutationObserver=e())}("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=16)}([,,function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s,a=2,r=(s={},s.BEFORE_ITEMS=0,s.AFTER_ITEMS=1,s.ITEMS=2,s.ANIMATE=3,s.DESTROY=4,s),o=function(t,e){var n=t._state,i=t._state;0===i&&1===e||3===i&&3===e?i=a:0===i&&2===e||3===i&&0===e?i=1:1===i&&1===e||i===a&&2===e?i=3:(1===i&&3===e||i===a&&0===e)&&(i=0),i!==n&&(t._state=i,3===n?t.cancelFrame():3===i&&(t.last=t.now(),t._frameId=t.requestFrame()))},h=function(t){var e=t[0],n=t[1],i=t[2];this.remove(e,n),this.remove(this._remove,t,i)},c=function(){this._soon=null},u=function(t){t.requestFrame();for(var e=t.cleanup,n=void 0,i=void 0,s=void 0,a=0,r=e.length;a<r;a+=2){n=e[a+0],i=e[a+1];for(var h=t.stages,c=Array.isArray(h),u=0,h=c?h:h[Symbol.iterator]();;){var l;if(c){if(u>=h.length)break;l=h[u++]}else{if(u=h.next(),u.done)break;l=u.value}var f=l;if("break"===function(e){if(-1!==(s=e.findIndex(function(t,s){return s%2==0&&t===n&&e[s+1]===i})))return e.splice(s,2),t.itemCount-=1,"break"}(f))break}}if(e.length=0,0===t.itemCount)return void o(t,3);var d=t.now(),p=Math.min((d-t.last)/1e3,.033);t.last=d;for(var m=t.stages,v=Array.isArray(m),y=0,m=v?m:m[Symbol.iterator]();;){var b;if(v){if(y>=m.length)break;b=m[y++]}else{if(y=m.next(),y.done)break;b=y.value}for(var g=b,_=0;_<g.length;_+=2)try{g[_+0](g[_+1],p)}catch(t){console.error(t?t.stack||t:t)}}},l=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=n.requestFrame,r=void 0===s?window.requestAnimationFrame:s,o=n.cancelFrame,l=void 0===o?window.cancelAnimationFrame:o,f=n.now,d=void 0===f?Date.now:f;i(this,t),this._state=a,this.itemCount=0,this.stages=[[],[],[],[],[]],this.cleanup=[],this._remove=h.bind(this),this._soonNull=c.bind(this),this.requestFrame=function(){e._frameId=r.call(null,function(){return u(e)})},this.cancelFrame=function(){l.call(null,e._frameId)},this.now=d}return t.prototype.pause=function(){o(this,0)},t.prototype.resume=function(){o(this,1)},t.prototype.add=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ANIMATE";0===this.itemCount&&o(this,2),this.itemCount+=1,this.stages[r[n]].push(t,e)},t.prototype.remove=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.cleanup.push(t,e)},t.prototype.schedule=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"BEFORE_ITEMS";this.add(t,e,n)},t.prototype.unschedule=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.remove(t,e)},t.prototype.once=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"BEFORE_ITEMS";this.add(t,e,n),this.add(this._remove,[t,e,n],n)},t.prototype.soon=function(){return this._soon||(this._soon=Promise.resolve().then(this._soonNull)),this._soon},t}();l.stages={BEFORE_ITEMS:"BEFORE_ITEMS",AFTER_ITEMS:"AFTER_ITEMS",ITEMS:"ITEMS",ANIMATE:"ANIMATE",DESTROY:"DESTROY"},"function"==typeof requestAnimationFrame?l.main=new l:l.main=new l({requestFrame:function(t){return setTimeout(t,16)},cancelFrame:function(t){return clearTimeout(t)}}),e.a=l},,,,,,,,,,,,,,function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=n(17),a=n(18),r=n(20),o=n(21),h=n(22),c=n(2),u=n(24),l=function(){function t(e){var n=e.loop,l=e.animations;i(this,t),this.loop=n||c.a.main,this.animations=l;var f=this.bus=new r.a,d={},p=this.matcher=new h.a;Object.keys(l).forEach(function(t){p.add(t,Object.keys(l[t])),d[t.split(" ")[0]]=l[t]});var m=new a.a(l),v=m.create,y=this.manager=new s.a(v,this.loop);new o.a(y,f),this.innerObserver=new u.a({loop:this.loop,bus:f,matcher:p})}return t.prototype.observe=function(t){this.innerObserver.observe(t)},t.prototype.disconnect=function(){this.innerObserver.disconnect()},t.prototype.getManager=function(){return this.manager},t.prototype.getAnimated=function(t){return this.manager.getAnimated(t)},t}();e.default=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=n(2),a=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a.main;i(this,t),this.factory=e,this.loop=n,this.states={},this.elementToId=new Map}return t.prototype.get=function(t,e){var n=this.states[e];return n||(n=this.states[e]=this.factory(t)),n},t.prototype.set=function(t,e,n){var i=this.get(t,e);return i.set(n||"default"),i},t.prototype.delete=function(t,e){this.states[e]&&(this.states[e].unschedule(),this.states[e]=null)},t.prototype.setElement=function(t,e,n){var i=this.get(t,e);if(i){this.elementToId.set(n,e);var s=i.data.animated||{root:{element:null}};s.root.element=n,i.schedule(s,this.loop)}},t.prototype.getAnimatedState=function(t){this.states[this.elementToId.get(t)]},t.prototype.getAnimated=function(t){var e=this.getAnimatedState(t);return e&&e.data.animated},t}();e.a=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=n(19),a=function(){function t(e){i(this,t),this.animations=e,this.create=this.create.bind(this)}return t.prototype.create=function(t){return new s.a(this.animations[t])},t}();e.a=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(t,e){return t};s.copy=function(t){return t},s.merge=function(t){return t};var a=function(){};a.done=function(){return!0};var r=function(){};r.store=function(){},r.restore=function(){};var o={update:s,animate:a,present:r},h=function(){},c=0,u="__init__",l=function(t){t.loop.soon().then(function(){return d(t,3)})},f=function(t){t.loop.soon().then(function(){return p(t,0)})},d=function(t,e){var n=t.transitionState,i=0;if((3===n||7===n)&&3===e){3===n&&(t.animation={});var h=t.get()||"default",u=t.animations.default||o,d=t.animations[h]||u,m=t.animation.update=d.update||u.update||s;t.animation.animate=d.animate||u.animate||a;var v=t.animation.present=d.present||u.present||r,y=t.data,b=y.animated.root;return y.lastT=y.t,y.t=0,y.end=m(y.end,b.element,y),3===t.transitionState?(y.state=m.copy(y.state,y.end),y.begin=m.copy(y.begin,y.end)):(y.state=m.merge(y.state,y.end),y.begin=m.merge(y.begin,y.end)),y.store=v.store(y.store,b.element,y),t.loop.add(p,t),t.transitionState=8,void f(t)}if(n===c)0===e?n=1:1===e&&(n=2);else if(1===n)1===e&&(i=2,n=3);else if(2===n)0===e?(i=2,n=3):2===e&&(n=c);else if(4===n)0===e?n=5:1===e&&(n=6);else if(5===n)0===e?i=1:1===e&&(i=2,n=7);else if(6===n)0===e?(i=2,n=7):2===e&&(n=4);else if(7===n)0===e?i=1:2===e&&(n=5);else if(8===n){if(0===e||4===e||2===e){2!==e&&t.resolve();var g=t.data;t.animation.present.restore(g.animated.root.element,g.store,g),t.animation.update.copy(g.begin,g.state),t.loop.remove(p,t)}0===e?(i=2,n=7):2===e?n=5:4===e&&(n=6)}0!==i&&(1===i?t.resolve():2===i&&l(t)),n!==t.transitionState&&(t.transitionState=n)},p=function(t,e){if(8===t.transitionState){var n=t.data,i=t.animation,s=i.animate,a=i.present;n.t+=e,s(n.t,n.state,n.begin,n.end,n),s.done&&s.done(n.t,n.state,n.begin,n.end,n)?d(t,4):a(n.animated.root.element,n.state,n)}},m=function(){function t(e){i(this,t),this.state=u,this.transitionState=c,this.animation=null,this.animations=e,this.data={t:0,lastT:0,store:null,state:null,begin:null,end:null,animated:null},this.resolve=h}return t.prototype.get=function(){return this.state},t.prototype.set=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;this.state=t,d(this,0),this.resolve=e},t.prototype.setThen=function(t){var e=this;return new Promise(function(n){return e.set(t,n)})},t.prototype.schedule=function(t,e){this.data.animated=t,this.loop=e,d(this,1)},t.prototype.unschedule=function(){d(this,2),this.data.animated=null},t.prototype.transitionStep=function(t){d(this,t)},t.prototype.step=function(t){p(this,t)},t}();e.a=m},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(){i(this,t),this.set=[]}return t.prototype.values=function(){return this.set},t.prototype.add=function(t){this.set.push(t)},t.prototype.delete=function(t){var e=this.set.indexOf(t);-1!==e&&this.set.splice(e,1)},t}(),a=function(){function t(){i(this,t),this.bound={},this.sets={}}return t.prototype.setFor=function(t,e){return this.sets[t]=this.sets[t]||{},"*"===e?this.sets[t].__all__=this.sets[t].__all__||new s:this.sets[t][e]=this.sets[t][e]||new s},t.prototype.bind=function(t,e){if(!this.bound[t]){var n=t.split(":"),i=n[0],s=n[1],a=this.setFor(i,"*"),r=this.setFor(i,s);if(3===e){var o=a.values(),h=r.values();this.bound[t]=function(t,e,n){for(var i=0,a=o.length;i<a;)o[i++](s,t,e,n);for(var r=0,c=h.length;r<c;)h[r++](t,e,n)}}else this.bound[t]=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var i=a.values(),o=Array.isArray(i),h=0,i=o?i:i[Symbol.iterator]();;){var c;if(o){if(h>=i.length)break;c=i[h++]}else{if(h=i.next(),h.done)break;c=h.value}c.apply(void 0,[s].concat(e))}for(var u=r.values(),l=Array.isArray(u),f=0,u=l?u:u[Symbol.iterator]();;){var d;if(l){if(f>=u.length)break;d=u[f++]}else{if(f=u.next(),f.done)break;d=f.value}d.apply(void 0,e)}}}return this.bound[t]},t.prototype.on=function(t,e){var n=t.split(":"),i=n[0],s=n[1],a=this.setFor(i,s);return a.add(e),function(){return a.delete(e)}},t}();e.a=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(e,n){i(this,t),this.manager=e,this.bus=n,this.stateBegin=n.bind("state:begin",3),this.stateEnd=n.bind("state:end",3),n.on("state:change",this.set.bind(this)),n.on("state:destroy",e.delete.bind(e)),n.on("element:create",e.setElement.bind(e)),n.on("element:update",e.setElement.bind(e)),n.on("element:destroy",e.delete.bind(e))}return t.prototype.set=function(t,e,n){var i=this,s=this.manager.set(t,e,n);this.stateBegin(t,e,n),s.resolve=function(){return i.stateEnd(t,e,n)}},t}();e.a=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=n(23),a=function(){function t(){i(this,t),this.patterns=new s,this.results={},this.idToTypes={},this._match={last:"",type:"",id:"",animation:""}}return t.prototype.add=function(t,e){var n=t.split(" "),i=n[0],a=n[1];a?(a=a.replace("{type}",i).replace("{id}","*"),-1===a.indexOf("*")&&(a+="*")):a=i+"*",this.patterns.add(i),this.patterns.add(a),this.idToTypes[a]=i;var r={id:(new s).add(a),animationNames:e,hasAnimation:{},animations:new s};e.forEach(function(t){r.animations.add(t.replace("{type}",i)),r.hasAnimation[t]=!0}),r.animations.add(a),this.results[i]=r},t.prototype.match=function(t){if(this._match.last===t)return Boolean(this.results[this._match.type]);this._match.last=t;var e=this._match.type=this.patterns.search(t);if(!e)return this._match.animation=null,this._match.id=null,!1;var n=void 0,i=void 0,s=void 0,a=this.patterns.begin,r=this.patterns.end;return e&&e.endsWith("*")?(e=this.idToTypes[e],s=this.results[e],i=s.animations.search(t,a,r+1)):(s=this.results[e],i=s.animations.search(t,r)),i?i.endsWith("*")?(n=t.substring(s.animations.begin,s.animations.end),(i=s.animations.search(t,s.animations.end))||(i=s.animations.search(t,0,a+1))):n||(s.id.search(t,s.animations.end)?n=t.substring(s.id.begin,s.id.end):s.id.search(t,0,a+1)&&(n=t.substring(s.id.begin,s.id.end))):(i=s.animations.search(t,0,a+1),i?i.endsWith("*")?(n=t.substring(s.animations.begin,s.animations.end),i=s.animations.search(t,s.animations.end,a+1)):n||s.id.search(t,s.animations.end,a+1)&&(n=t.substring(s.id.begin,s.id.end)):n||s.id.search(t,0,a+1)&&(n=t.substring(s.id.begin,s.id.end))),this._match.type=e,this._match.animation=i||"default",this._match.id=n||e,!0},t.prototype.matchType=function(){return this._match.type},t.prototype.matchAnimation=function(){return this._match.animation},t.prototype.matchId=function(){return this._match.id},t.prototype.matchHasAnimation=function(t){return this.results[this.matchType()].hasAnimation[t]||!1},t}();e.a=a},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(){n(this,t),this.patterns=[],this._dirty=!0,this.code=[],this.answers=[]}return t.prototype.add=function(t){return this.patterns.push({pattern:t,chars:t+"\0",codes:(t+"\0").split("").map(function(t){return t.charCodeAt(0)})}),this._dirty=!0,this},t.prototype.rebuild=function(){for(var t={},e=[],n=[],i=0;i<this.patterns.length;i++){for(var s=this.patterns[i],a=t,r=0;r<s.codes.length-1;r++){var o=s.codes[r];if(42!==o)a=a[o]=a[o]||{};else for(var h={},c=[[a,Object.keys(a),0]];c.length;){var u=c.pop();a=u[0];var l=u[1],f=u[2];if(f<l.length){var d=a[l[f]];c.push([a,l,f+1]),d.pattern||c.push([d,Object.keys(d),0])}else a=a[42]=h}}a[32]=s,a[0]=s}for(var p=e.length,m=Object.entries(t),v=0;v<m.length;v++)e[p++]=m[v][0],e[p++]=m[v][1];e[p++]=-1,e[p++]=-1;for(var y=0;y<e.length;){var b=e[y+1];if(-1!==b)if(b.pattern)e[y+1]=-n.length,n.push(b.pattern),y+=2;else{e[y+1]=p,m=Object.entries(b),m.sort(function(t,e){var n=t[0],i=e[0];return 42===Number(n)?1:42===Number(i)?-1:Number(n)-Number(i)});for(var g=0;g<m.length;g++)e[p++]=m[g][0],e[p++]=m[g][1];e[p++]=-1,e[p++]=-1,y+=2}else y+=2}this.code=new Int32Array(e),this.answers=n,this._dirty=!1},t.prototype.search=function(t,e,n){if(this._dirty){if(0===this.patterns.length)return!1;this.rebuild()}this.begin=e||0,this.end=e||0;for(var i=t+"\0",s=this.code,a=0,r=e||0,o=n||i.length;r<o;++r){var h=i.charCodeAt(r);if(s[a]===h){if(s[a+1]<=0)return this.end=r,this.answers[-s[a+1]];a=s[a+1]}else if(42===s[a]&&32!==h&&0!==h){for(a=s[a+1];++r<o&&32!==(h=i.charCodeAt(r))&&0!==h;);--r}else if(--r,a+=2,-1===s[a]){for(a=0;++r<o&&32!==i.charCodeAt(r););this.begin=r+1}}return!1},t}();t.exports=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e){var n=e.bus,s=e.loop,a=e.matcher;i(this,t),this.bus=n,this.loop=s,this.matcher=a,this.elements={},this.elementRefs={},this.change=n.bind("state:change",3),this.create=n.bind("element:create",3),this.update=n.bind("element:update",3),this.destroy=n.bind("element:destroy",2),this.onChildMutate=this.onChildMutate.bind(this),this.onClassMutate=this.onClassMutate.bind(this),this.childMutationObserver=new MutationObserver(this.onChildMutate),this.classMutationObserver=new MutationObserver(this.onClassMutate)}return t.prototype.createNode=function(t){this.matcher.match(t.className)&&(this.change(this.matcher.matchType(),this.matcher.matchId(),this.matcher.matchAnimation()),this.elements[this.matcher.matchId()]?(this.update(this.matcher.matchType(),this.matcher.matchId(),t),this.elementRefs[this.matcher.matchId()]+=1):(this.create(this.matcher.matchType(),this.matcher.matchId(),t),this.elementRefs[this.matcher.matchId()]=1),this.elements[this.matcher.matchId()]=t)},t.prototype.destroyNode=function(t){var e=this;if(this.matcher.match(t.className)){var n=this.matcher.matchType(),i=this.matcher.matchId();this.elementRefs[i]-=1,this.loop.soon().then(function(){0===e.elementRefs[i]&&(e.destroy(n,i),delete e.elements[i],delete e.elementRefs[i])})}},t.prototype.onChildMutate=function(t){for(var e=0,n=t.length;e<n;e++){for(var i=t[e],s=0,a=i.addedNodes.length;s<a;s++)this.createNode(i.addedNodes[s]);for(var r=0,o=i.removedNodes.length;r<o;r++)this.destroyNode(i.removedNodes[r])}},t.prototype.onClassMutate=function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];i.target.className!==i.oldValue&&this.matcher.match(i.target.className)&&this.change(this.matcher.matchType(),this.matcher.matchId(),this.matcher.matchAnimation())}},t.prototype.observe=function(t){this.childMutationObserver.observe(t,this.childMutationInitOptions),this.classMutationObserver.observe(t,this.classMutationInitOptions);for(var e in this.animations)for(var n=t.getElementsByClassName(e),i=0;i<n.length;i++)this.createNode(n[i])},t.prototype.disconnect=function(){this.childMutationObserver.disconnect(),this.classMutationObserver.disconnect()},s(t,[{key:"childMutationInitOptions",get:function(){return{childList:!0,subtree:!0}}},{key:"classMutationInitOptions",get:function(){return{attributes:!0,attributeOldValue:!0,attributeFilter:["class"],subtree:!0}}}]),t}();e.a=a}])});