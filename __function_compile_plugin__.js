jsonpFunction(function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){var r=n(7),a=n(8),o=n(9),i=function e(t){function n(e){return Object.setPrototypeOf(e,n.prototype)}function i(e){return Object.setPrototypeOf(e,i.prototype)}function u(e){return e}var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.prototype=Object.create(Function.prototype),n.prototype.constructor=n,n.prototype.asfunc=function(e){return r(this,e)},i.prototype=Object.create(Object.prototype),i.prototype.constructor=i,i.prototype.compile=function(e){return r(this,e)},i.prototype.run=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o.apply(void 0,[this,e].concat(n))};var c={},s=Object.create(l);Object.defineProperties(s,{create:{enumerable:!1,value:function(t,n){return"function"==typeof t?e(function(){return Object.assign({},c,t())},n):e(Object.assign({},c,t),n)}},funcRegistry:{enumerable:!1,value:function(e){var t={};return Object.entries(s).forEach(function(n){var r=n[0],a=n[1];t[r]=a.asfunc(e)}),a(t)}},register:{enumerable:!1,value:function(e,t,r){return"function"==typeof t&&(r=t,t=void 0),t&&(r.args=t),c[e]=r,s[e]=new n(function(){for(var e,t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return n.forEach(function(e){Object.getPrototypeOf(e)===i.prototype&&Object.setPrototypeOf(e,Object.prototype)}),new i(u((e=r).call.apply(e,[this].concat(n))))}),s[e].args=t,n.prototype[e]=new n(function(){for(var e,t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return n.forEach(function(e){Object.getPrototypeOf(e)===i.prototype&&Object.setPrototypeOf(e,Object.prototype)}),new i(u((e=r).call.apply(e,[this,this].concat(n))))}),n.prototype.args=t,i.prototype[e]=new n(function(){for(var e,t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return n.forEach(function(e){Object.getPrototypeOf(e)===i.prototype&&Object.setPrototypeOf(e,Object.prototype)}),new i(u((e=r).call.apply(e,[this,this].concat(n))))}),s[e]}},cast:{enumerable:!1,value:function(e){return new n(function(){return new n(e.bind())()})}},context:{enumerable:!1,value:function(e){return e(s)}},freeze:{enumerable:!1,value:function(){return Object.freeze(c),Object.freeze(s),Object.freeze(n.prototype),Object.freeze(i.prototype),s}}});var p=t;"function"==typeof t&&(p=t());for(var f in p)s.register(f,p[f].args,p[f]);return s};e.exports=i,e.exports.create=i},function(e,t){var n=function(e){return{op:"literal",value:e}},r=n,a=function(e,t){return{op:"write",name:e,value:t}},o=a,i=function(e){return{op:"read",name:e}},u=i,l=function(e,t,n){return{op:"store",ref:e,member:t,value:n}},c=l,s=function(e,t){return{op:"load",ref:e,member:t}},p=s,f=function(e,t){return{op:"unary",operator:e,right:t}},d=function(e,t,n){return{op:"binary",operator:e,left:t,right:n}},m=function(e,t){return d("==",e,t)},x=function(e,t){return d("!=",e,t)},v=function(e,t){return d("<",e,t)},y=function(e,t){return d("<=",e,t)},h=function(e,t){return d(">",e,t)},g=function(e,t){return d(">=",e,t)},b=function(e,t){return d("&&",e,t)},k=function(e,t){return d("||",e,t)},_=function(e,t){return d("+",e,t)},w=function(e,t){return d("-",e,t)},O=function(e,t){return d("*",e,t)},j=function(e,t){return d("/",e,t)},S=function(e,t){return d("%",e,t)},A=function(e,t){return d("min",e,t)},E=function(e,t){return d("max",e,t)},N=function(e){return f("abs",e)},J=function(e){return{op:"body",body:e}},q=function(e,t,n){return{op:"for_of",iterable:e,keys:t,body:J(n)}},R=function(e,t){return{op:"not_last",last:t,not_last:e}},z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return{op:"branch",test:e,body:J(t),else:J(n)}},P=function(e,t){return{op:"loop",test:e,body:J(t)}},M=function(e,t){return{op:"call",func:e,args:t}},F=function(e,t){return{op:"func",args:e,body:J(t)}},L=function(e){return{op:"methods",methods:e}};e.exports={literal:n,l:r,write:a,w:o,read:i,r:u,store:l,st:c,load:s,lo:p,unary:f,binary:d,eq:m,ne:x,lt:v,lte:y,gt:h,gte:g,and:b,or:k,add:_,sub:w,mul:O,div:j,mod:S,min:A,max:E,abs:N,body:J,for_of:q,not_last:R,branch:z,loop:P,call:M,func:F,methods:L}},function(e,t,n){var r=n(1),a=n(0),o=a(r),i=o.context(function(e){var t=e.func,n=e.call,r=(e.lo,e.l,e.r);return function(e){return function(a,o,i,u){var l=function(r){return a(t(i,[e(n(o(r),u))]))};return l.args=[["x"],r("x")],l}}}),u=o.context(function(e){var t=e.func,n=e.call,r=(e.lo,e.l,e.r);return function(e){return function(a,o,i,u){var l=function(r,l){return a(t(i,[e(n(o(r),u),n(o(l),u))]))};return l.args=[["x","y"],r("x"),r("y")],l}}}),l=o.context(function(e){return[e.abs].map(i)}),c=l[0],s=o.context(function(e){return[e.add,e.sub,e.mul,e.div,e.mod,e.min,e.max,e.eq,e.ne,e.lt,e.lte,e.gt,e.gte].map(u)}),p=s[0],f=s[1],d=s[2],m=s[3],x=s[4],v=s[5],y=s[6],h=s[7],g=s[8],b=s[9],k=s[10],_=s[11],w=s[12];e.exports={abs:c,add:p,sub:f,mul:d,div:m,mod:x,min:v,max:y,eq:h,ne:g,lt:b,lte:k,gt:_,gte:w}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),a={icon:{default:{update:r.c.context(function(e){var t=e.object,n=e.value,r=e.constant,a=e.property;return(0,e.rect)().byElement(t({left:n(function(e){return e.left+e.width/2}),top:n(function(e){return e.top+e.height/2}),width:a("width"),height:a("height"),opacity:r(1),duration:n(function(){return.5*Math.random()+.5})}))}),animate:r.a.context(function(e){var t=e.object,n=e.begin,r=e.end,a=n().to(r());return t({left:a,top:a,width:a,height:a,opacity:a}).duration(1).easing(function(e,t,n,r){return e/r.duration})}),present:r.b.context(function(e){var t=e.styles,n=e.concat,r=e.translate,a=e.key,o=e.end,i=e.constant,u=e.scale;return t({visibility:i("initial"),transform:n([r([a("left").to(o).px(),a("top").to(o).px()]),u([a("width"),a("height")].map(function(e){return e.over(o)}))]),opacity:a("opacity")})})},enter:{animate:r.a.context(function(e){var t=e.object,n=(e.begin,e.end),r=e.constant,a=r(0).to(n());return t({width:a,height:a,opacity:a}).duration(1).easing(function(e,t,n,r){return e/r.duration})})},leave:{animate:r.a.context(function(e){var t=e.object,n=e.begin,r=(e.end,e.constant),a=(e.value,n().to(r(0)));return t({width:a,height:a,opacity:a}).duration(1).easing(function(e,t,n,r){return e/r.duration})})}}};t.default=a},function(e,t,n){"use strict";var r=n(5),a=n.n(r),o=n(11),i=n.n(o),u=n(14),l=n.n(u);n.d(t,"c",function(){return a.a}),n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return l.a})},function(e,t,n){e.exports=n(6)},function(e,t,n){var r=n(0),a=n(10);e.exports=r(a)},function(e,t,n){function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if("expression"===e.type){n.push(e);for(var r=e.expr.length-1;r>=0;--r){if(i(e.expr[r],t,n))return!0;if(t(e.expr[r],r,e,n))return!0}n.pop()}return!1}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[];if(e&&"expression"===e.type){n.push(e);for(var a=e.expr.length-1;a>=0;--a){r=r.concat(u(e.expr[a],t,n));var o=t(e.expr[a],a,e,n);o&&(r.push(e.expr[a]),"object"===(void 0===o?"undefined":l(o))&&o.type?e.expr.splice(a,1,o):e.expr.splice(a,1))}n.pop()}return r}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),p=function e(t){o(this,e),Object.assign(this,t)},f=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype.toString=function(){return this.token},t}(p),d=function(e){function t(){o(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];var u=r(this,e.call.apply(e,[this].concat(a)));if("string"!=typeof u.name)throw new Error('assertion: Local "name" must be a string.');return u}return a(t,e),t.prototype.toString=function(){return this.name},t}(p),m=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype.toString=function(){return"var "+this.local},t}(p),x=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype.toString=function(){return"var "+this.local.toString()+" = "+this.value.toString()+";"},t}(p),v=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype.toString=function(){try{return this.expr.join("")}catch(e){throw e}},t}(p),y=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype.toString=function(){return 0===this.expr.length?"":e.prototype.toString.call(this)+";"},t.prototype.toJSON=function(){return Object.assign({constructor:"Line"},this)},t}(v),h=function(e){function t(n,a,i){return o(this,t),r(this,e.call(this,{type:"expression",expr:[_("("),a,n,i,_(")")]}))}return a(t,e),c(t,[{key:"op",get:function(){return this.expr[2]}},{key:"left",get:function(){return this.expr[1]}},{key:"right",get:function(){return this.expr[3]}}]),t}(v),g=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return a(t,e),t.prototype.toString=function(){return this.value},t}(p),b=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return a(t,e),t}(v);b.hasResult=function(e){var t=e.expr;if(!t)return!1;for(var n=t.length-1;n>=0;--n){if(k(t[n]))return!0;if("expression"===t[n].type){if(b.hasResult(t[n]))return!0}}return!1};var k=function(e){return e.expr&&(e instanceof b||e.result)};b.take=function(e){if(!e.expr)return S([e]);if(k(e))return e;for(var t=e.expr.length-1;t>=0;--t){if(k(e.expr[t]))return J(e.expr[t]instanceof b?S(e.expr.splice(t,1)[0].expr):e.expr.splice(t,1)[0]);if("expression"===e.expr[t].type){var n=b.take(e.expr[t]);if(n)return n}}return null},b.taken=function(e){return e.expr?k(e)?S([]):e:S([])};var _=function(e){return new f({type:"token",token:e})},w=function(e){return new d({type:"local",name:e})},O=function(e){return new m({type:"declare",local:e})},j=function(e){return new y({type:"expression",expr:[e]})},S=function(e){return new v({type:"expression",expr:e})},A=function(e,t,n){var r=[],a=t;b.hasResult(t)&&(r=b.taken(t),a=b.take(t));var o=[],i=n;return b.hasResult(n)&&(o=b.taken(n),i=b.take(n)),a!==t||i!==n?S([r,o,N([new h(e,q(a),q(i))])]):new h(e,t,n)},E=function(e){return new g({type:"literal",value:e})},N=function(e){return new b({type:"expression",expr:e})},J=function(e){return e instanceof b?(i(e,function(e){e.result=!1}),S(e.expr)):(i(e,function(e){e.result=!1}),u(e,function(e){return e instanceof b&&S(e.expr)}),e)},q=function(e){return e instanceof y?S(e.expr):(u(e,function(e){return e instanceof y&&S(e.expr)}),e)},R=function(e){if(e.map(b.hasResult).filter(Boolean).length>0){var t=e.map(b.taken).filter(Boolean),n=e.map(b.take).filter(Boolean);return S([].concat(t,[N([].concat(n))]))}return S(e)},z=function(e){var t=e.compile,n=e.pointer,r=e.stack,a=e.scope;if(n.value&&"read"===n.value.op)return C(r,a,n.value.name)[n.value.name]&&"literal"===C(r,a,n.value.name)[n.value.name].op?C(r,a,n.value.name)[n.value.name]:"string"==typeof C(r,a,n.value.name)[n.value.name]?w(C(r,a,n.value.name)[n.value.name]):E(n.value.name);if(n.value&&"func"===n.value.op)return t(n.value);if("string"==typeof n.value)return E(JSON.stringify(n.value));if("object"===l(n.value)){Object.entries(n.value);return S([_("{")].concat([_("}")]))}return E(n.value)},P=function(e,t){var n=e.names,r=void 0;return n[t]||(n[t]=[]),r=0===n[t].length?t:"_"+t+n[t].length,n[t].push(r),r},M=function(e,t,n){e.scope[t]=n},F=function(e,t){return e.scope[t]},L=function(e,t){var n=e.locals,r=e.context;return n[t]?F(r,t):P(r,t)},B=function(e){var t=(e.write,e.compile),n=e.pointer,r=e.locals,a=e.scope,o=e.names,i=(e.vars,void 0);if(r[n.name])i=a[n.name];else{o[n.name]||(o[n.name]=[]);var u="_"+n.name+o[n.name].length;o[n.name].push(u),i=u}var l=t(n.value),c=void 0;return c=S(b.hasResult(l)?[b.taken(l),N([O(w(i)),w(i),_(" = "),b.take(l)])]:[O(w(i)),w(i),_(" = "),l]),r[n.name]||(r[n.name]=i,a[n.name]=i),c},T=function(e){for(var t=(e.write,e.compile),n=e.pointer,r=e.scope,a=e.stack,o=r,i=a.length-1;i>=0&&!o[n.name];)o=a[i][1],i-=1;if(o[n.name]&&"literal"===o[n.name].op)return t(o[n.name]);try{return w(o[n.name])}catch(e){throw console.log(n.name,a),e}},C=function(e,t,n){for(var r=t,a=e.length-1;a>=0&&!r[n];)r=e[a][1],a-=1;return r},I=function(e){var t=(e.write,e.compile),n=e.pointer,r=e.stack,a=e.scope,o=t(n.ref),i=n.member,u=void 0;if("literal"===i.op)u=S([_("."),E(i.value)]);else if("read"===i.op&&"literal"===C(r,a,i.name)[i.name].op){var l=C(r,a,i.name)[i.name].value;u=S([_("."),E(l)])}else u=S([_("["),t(i),_("]")]);var c=t(n.value),s=S([]),p=o,f=S([]),d=u,m=S([]),x=c;return b.hasResult(o)&&(s=b.taken(o),p=b.take(o)),b.hasResult(u)&&(f=b.taken(u),d=b.take(u)),b.hasResult(c)&&(m=b.taken(c),x=b.take(c)),S(p!==o||d!==u||x!==c?[].concat(s.expr?s.expr:[s],f.expr?f.expr:[f],m.expr?m.expr:[m],[j(q(N([p,d,_(" = "),x])))]):[o,u,_(" = "),c])},W=function(e){var t=(e.write,e.compile),n=e.pointer,r=e.stack,a=e.scope,o=t(n.ref),i=n.member,u=void 0;if("literal"===i.op&&"methods"===i.value)u=S([]);else if("literal"===i.op&&i.value&&"read"===i.value.op&&C(r,a,i.name)[i.name])u=S([_("["),E(C(r,a,i.name)[i.name]),_("]")]);else if("literal"===i.op&&i.value&&"read"===i.value.op)u=S([_("["),t(i),_("]")]);else if("literal"===i.op&&"number"==typeof i.value)u=S([_("["),E(i.value),_("]")]);else if("literal"===i.op)u=S([_("."),E(i.value)]);else if("read"===i.op&&"literal"===C(r,a,i.name)[i.name].op){var l=C(r,a,i.name)[i.name].value;u=S([_("."),E(l)])}else u=S([_("["),t(i),_("]")]);return S(b.hasResult(o)?[b.taken(o),N([b.take(o),u])]:[o,u])},U={"==":function(e,t){return R([_("("),e,_(" == "),t,_(")")])},"!=":function(e,t){return R([_("("),e,_(" != "),t,_(")")])},"<":function(e,t){return R([_("("),e,_(" < "),t,_(")")])},"<=":function(e,t){return R([_("("),e,_(" <= "),t,_(")")])},">":function(e,t){return R([_("("),e,_(" > "),t,_(")")])},">=":function(e,t){return R([_("("),e,_(" >= "),t,_(")")])},"&&":function(e,t){return R([_("("),e,_(" && "),t,_(")")])},"||":function(e,t){return R([_("("),e,_(" || "),t,_(")")])},"+":function(e,t){return A(_(" + "),e,t)},"-":function(e,t){return A(_(" - "),e,t)},"*":function(e,t){return A(_(" * "),e,t)},"/":function(e,t){return A(_(" / "),e,t)},"%":function(e,t){return A(_(" % "),e,t)},min:function(e,t){return R([_("Math.min("),e,_(", "),t,_(")")])},max:function(e,t){return R([_("Math.max("),e,_(", "),t,_(")")])},abs:function(e){return R([_("Math.abs("),e,_(")")])}},D=function(e){var t=(e.write,e.compile),n=e.pointer;return U[n.operator](t(n.right))},G=function(e){var t=(e.write,e.compile),n=e.pointer;return U[n.operator](t(n.left),t(n.right))},H=function(e){var t=e.compile,n=e.pointer,r=e.context,a=e.scope,o=e.locals,i=e.names;if("read"===n.iterable.op){var u="_for_of_index",l=P(r,u),c=o[u],p=a[u];o[u]=l,a[u]=l;var f="_for_of_length",d=P(r,f),m=o[f],x=a[f];o[f]=d,a[f]=d;var v=t(s.w(u,s.l(0))),y=t(s.lt(s.r(u),s.r(f))),h=b.hasResult(v),g=b.hasResult(y),k=S([t(s.body([s.w("constant_entries",s.call(s.l("Object.entries"),[n.iterable]))])),J(S([t(s.w(f,s.lo(s.r("constant_entries"),s.l("length")))),_(";")])),h?b.taken(v):S([]),g?b.taken(y):S([]),S([_("for "),_("(")]),S([h?b.take(v):v,_("; ")]),S([g?b.take(y):y,_("; ")]),S([t(s.r(u)),_("++")]),S([_(") ")]),_("{"),J(t(s.body([n.keys[0]?s.w(n.keys[0],s.lo(s.lo(s.r("constant_entries"),s.r(u)),s.l(0))):s.body([]),s.w(n.keys[1],s.lo(s.lo(s.r("constant_entries"),s.r(u)),s.l(1)))].concat(n.body.body)))),_("}"),N([])]);return i[u].pop(),o[u]=c,a[u]=p,i[f].pop(),o[f]=m,a[f]=x,k}var w="_for_of_index",O=P(r,w),j=o[w],A=a[w];o[w]=O;var E="_for_of_length",q=P(r,E),R=o[E],z=a[E];o[E]=q,a[E]=s.l(Object.entries(n.iterable).length);var M=S([].concat(Object.entries(n.iterable).map(function(e,u){var l=e[0],c=e[1];a[w]=s.l(u);var p=P(r,n.keys[0]),f=o[n.keys[0]],d=a[n.keys[0]],m=P(r,n.keys[1]),x=o[n.keys[0]],v=a[n.keys[0]];o[n.keys[0]]=p,a[n.keys[0]]=s.l(l),o[n.keys[1]]=m,a[n.keys[1]]=c;var y=(t(n.body),J(S([t(n.body)])));return i[n.keys[0]].pop(),o[n.keys[0]]=f,a[n.keys[0]]=d,i[n.keys[1]].pop(),o[n.keys[1]]=x,a[n.keys[1]]=v,y}),[N([])]));return i[w].pop(),o[w]=j,a[w]=A,i[E].pop(),o[E]=R,a[E]=z,M},K=function(e){var t=e.compile,n=e.pointer,r=e.scope;return t(r._for_of_index.op&&"literal"===r._for_of_index.op?r._for_of_index.value<r._for_of_length.value-1?n.not_last:n.last:s.call(s.func([],[s.w("not_last",n.not_last),s.branch(s.gte(s.r("_for_of_index"),s.sub(s.r("_for_of_length"),s.l(1))),[s.w("not_last",n.last)]),s.r("not_last")]),[]))},Q=function(e){var t=e.compile,n=e.pointer,r=e.context;if("load"===n.test.op&&Y(n.test,r)&&!Y(n.test,r).notFound&&~["func","methods"].indexOf(Y(n.test,r).op))return t(n.body);if("load"===n.test.op&&Y(n.test.ref,r)&&!Y(n.test.ref,r).notFound&&~["func","methods"].indexOf(Y(n.test.ref,r).op))return t(n.else);var a=t(n.test),o=void 0;return o=S(b.hasResult(a)?[b.taken(a),S([_("if "),_("("),q(b.take(a)),_(") ")]),_("{"),J(t(n.body)),_("}")]:[S([_("if "),_("("),q(a),_(") ")]),_("{"),J(t(n.body)),_("}")]),n.else.body.length?S([o,_("else "),_("{"),J(t(n.else)),_("}")]):o},V=function(e){var t=e.compile,n=e.pointer;return S([_("while ("),t(n.test),_(")"),_("{"),t(n.body),_("}")])},X=function(e){var t=(e.write,e.compile),n=e.pointer,r=n.body.map(t).filter(Boolean).map(j);return 0===r.length?S([]):1===r.length?b.hasResult(r[0])?S(r):N(r):S(b.hasResult(r[r.length-1])?[].concat(r.slice(0,r.length-1).map(J),[b.taken(r[r.length-1]),N([b.take(r[r.length-1])])]):[].concat(r.slice(0,r.length-1).map(J),[N([r[r.length-1]])]))},Y=function e(t,n){if("func"===t.op||"function"==typeof t)return t;if("literal"===t.op&&t.value&&"read"===t.value.op)return t.value;if("literal"===t.op)return t.value;if("binary"===t.op&&"||"===t.operator&&("load"!==t.left.op&&e(t.left,n)&&!e(t.left,n).notFound&&("func"===e(t.left,n).op||"methods"===e(t.left,n).op||"function"==typeof e(t.left,n)||Array.isArray(e(t.left,n)))||"load"===t.left.op&&"load"!==t.left.ref.op&&e(t.left.ref,n)&&!e(t.left.ref,n).notFound&&("func"===e(t.left.ref,n).op||"methods"===e(t.left.ref,n).op||"function"==typeof e(t.left.ref,n)||Array.isArray(e(t.left.ref,n)))||"load"===t.left.op&&"load"===t.left.ref.op&&"load"!==t.left.ref.ref.op&&e(t.left.ref.ref,n)&&!e(t.left.ref.ref,n).notFound("func"===e(t.left.ref.ref,n).op||"methods"===e(t.left.ref.ref,n).op||"function"==typeof e(t.left.ref.ref,n)||Array.isArray(e(t.left.ref.ref,n))))){var r=e(t.left,n);if(r&&!r.notFound)return r;var a=e(t.right,n);return"string"==typeof a?null:a&&!a.notFound?a:null}if("binary"===t.op&&"||"===t.operator)return null;if("binary"===t.op&&"-"===t.operator&&"number"==typeof e(t.left,n)&&"number"==typeof e(t.right,n)){return e(t.left,n)-e(t.right,n)}if("binary"===t.op&&"+"===t.operator&&"number"==typeof e(t.left,n)&&"number"==typeof e(t.right,n)){return e(t.left,n)+e(t.right,n)}if("read"===t.op){if(C(n.stack,n.scope,t.name)[t.name]&&"literal"===C(n.stack,n.scope,t.name)[t.name].op){var o=C(n.stack,n.scope,t.name)[t.name].value;return"string"==typeof o?w(o):o}var i=C(n.stack,n.scope,t.name)[t.name];return"string"==typeof i?w(i):i}if("load"===t.op&&e(t.ref,n)&&("literal"===t.member.op||"number"==typeof e(t.member,n)||"string"==typeof e(t.member,n)||e(t.member,n)&&!e(t.member,n).notFound)){var u=e(t.ref,n);return"literal"===t.member.op&&"methods"===t.member.value?u:("methods"===u.op&&(u=u.methods),"literal"===t.member.op?u[t.member.value]:u[e(t.member,n)])}return"methods"===t.op?t.methods[n.func]:Object.assign(s.func([],[s.l(void 0)]),{notFound:!0})},Z=function(e,t,n){return S(t<n.length-1?[e,_(", ")]:[e])},$=function(e,t,n){return S(t<n.length-1?[e,_(";")]:[e])},ee=function(e){var t=(e.write,e.compile),n=e.pointer,r=e.context,a=Y(n.func,r);a&&"methods"===a.op&&(a=a.methods.main);var o=void 0;if(!a||"function"==typeof a||"string"==typeof a||"literal"===a.op&&a.value.op&&"func"!==a.value.op||"literal"===a.op&&!a.value.op||"read"===a.op||"local"===a.type){var i=void 0;i=a?"literal"===a.op&&a.value.op?t(a.value):"literal"===a.op?E(a.value):"read"===a.op&&"literal"!==n.func.op?t(n.func):"read"===a.op?t(a):a.type?a:E(a.toString()):t(n.func);var u=n.args.map(t),l=[],c=[];u.forEach(function(e){b.hasResult(e)?(l.push(b.taken(e)),c.push(b.take(e))):c.push(e)}),o=S(l.length?[].concat(l,[N([_("("),i,_(")(")].concat(c.map(Z),[_(")")]))]):[_("("),i,_(")(")].concat(c.map(Z),[_(")")]))}else"methods"===a.op&&(a=a.methods.main),r.args=n.args.slice(),o=t(a),r.args=null;return o},te=function(e){var t=e.locals,n=e.scope,r=e.context;r.stack.push([t,n]),r.locals={},r.scope={}},ne=function(e){var t=e.context,n=t.stack.pop(),r=n[0],a=n[1];t.locals=r,t.scope=a},re=function(e,t){var n=e.names;t.forEach(function(e){n[e].pop()})},ae=function(e){var t=(e.write,e.compile),n=e.pointer,r=e.context,a=e.lookupScope,o=r.args;if(r.args=null,!o){r.locals,r.scope,r.args;te(r);var i=n.body,l=S([_("function(")].concat(n.args.map(function(e){var t=L(r,e);return M(r,e,t),w(t)}).map(Z),[_(") ")])),c=t(i);c.args=n.args;for(var p=r.options,f=p.passes,d=void 0===f?10:f,m=p.rules,x=void 0===m?Object.keys(le):m,v=x.concat.apply(x,(p._ruleSets||[]).map(function(e){return ce[e]})).filter(function(e,t,n){return-1===n.indexOf(e,t+1)}),y=0;y<d;++y)for(var h=0;h<v.length;++h)le[v[h]](c);var g=u(c,function(e){return e&&"declare"===e.type});if(g.length){var k=g.filter(function(e,t){return-1===g.slice(t+1).findIndex(function(t){return e.local.name===t.local.name})}).reduce(function(e,t){return e.expr.push(t.local,_(", ")),e},S([]));k.expr.pop(),c.expr.splice(0,0,S([_("var "),k,_(";")])),c.expr.length>1&&c.expr.splice(1,0,_(" "))}var O=u(c,function(e){return e&&"constant"===e.type});if(O.length&&c.expr.splice(0,0,S(O.map($))),le.markResults(c),b.hasResult(c)){var A=b.taken(c),E=b.take(c);c=S((A.expr?A.expr:[A]).concat(j(S([_("return "),q(E)]))))}else c.expr&&c.expr.length>0&&(c=S(c.expr.slice(0,c.expr.length-1).concat(j(S([_("return "),c.expr[c.expr.length-1]])))));J(l),J(c);var N=S([l,_("{"),c,_("}")]);return re(r,Object.keys(r.locals)),re(r,n.args),ne(r),N}var R=r.scope;te(r);var z=[];n.args.forEach(function(e,t){var n=void 0;try{n=Y(o[t],r)}catch(e){}"literal"===o[t].op&&"read"===o[t].value.op?r.scope[e]=a(o[t].value.name)[o[t].value.name]:"literal"===o[t].op?r.scope[e]=o[t]:"read"===o[t].op?r.scope[e]=R[o[t].name]:n&&!n.notFound?"local"===n.type?r.scope[e]=n.name:r.scope[e]=n:"binary"===o[t].op&&"||"===o[t].operator&&"load"===o[t].left.op&&"literal"===o[t].left.ref.op&&Array.isArray(o[t].left.ref.value)?z.push(s.write(e),o[t].right):z.push(s.write(e,o[t]))});var P=t(s.body(z.concat(n.body.body)));return re(r,Object.keys(r.locals)),ne(r),P},oe=function(e){var t=(e.write,e.compile),n=e.pointer,r=(e.func,e.options);return t(n.methods.op?n.methods:n.methods.main?s.call(s.l(s.func([],[s.w("f",n.methods.main)].concat(Object.keys(n.methods).filter(function(e){return"main"!==e}).filter(function(e){return-1!==(r.methods||Object.keys(n.methods)).indexOf(e)}).map(function(e){return s.st(s.r("f"),s.l(e),n.methods[e])}),[s.r("f")]))),[]):s.call(s.l(s.func([],[s.w("f",s.l({}))].concat(Object.keys(n.methods).map(function(e){return s.st(s.r("f"),s.l(e),n.methods[e])}),[s.r("f")]))),[]))},ie={literal:z,write:B,read:T,store:I,load:W,unary:D,binary:G,for_of:H,not_last:K,branch:Q,loop:V,body:X,call:ee,func:ae,methods:oe},ue=function(e,t){e._pointer.push(e.pointer),e.pointer=t;var n=ie[t.op](e);return e.pointer=e._pointer.pop(),n},le={markResults:function(e){e.result=e instanceof b,i(e,function(e,t,n,r){e.result=Boolean(r.find(function(e){return e.result||e instanceof b}))||e.result||e instanceof b})},flattenLines:function(e){return u(e,function(e,t,n){return n instanceof y&&1===n.expr.length&&e.expr&&1===e.expr.length&&e.expr[0]}),u(e,function(e,t,n){return e instanceof y&&1===e.expr.length&&e.expr[0].expr&&!i(e.expr[0],function(t,n,r){return r===e.expr[0]&&e instanceof y})&&new y({type:"expression",expr:e.expr[0].expr})}),u(e,function(e,t,n){return e instanceof y&&1===e.expr.length&&e.expr[0].expr&&!e.expr[0].expr.find(function(e){return!(e instanceof y)})&&e.expr[0]}),u(e,function(e,t,n){return e.expr&&!(e instanceof y)&&e.expr.find(function(e){return e instanceof y})&&e.expr.find(function(e){return e.expr&&!(e instanceof y)&&e.expr.find(function(e){return e instanceof y})})&&S(e.expr.reduce(function(e,t){return!t.expr||t instanceof y?e.push(t):e.push.apply(e,t.expr),e},[]))}),u(e,function(e,t,n){return e.expr&&!(e instanceof y)&&1===e.expr.length&&e.expr[0].expr&&!(e.expr[0]instanceof y)&&!e.expr[0].expr.find(function(e){return!(e instanceof y)})&&e.expr[0]}),u(e,function(e){return e instanceof y&&!e.expr.find(function(e){return!e.expr})&&!e.expr.find(function(e){return e instanceof y})&&e.expr.find(function(e){return e.expr.find(function(e){return!e instanceof y})})&&S(e.expr.reduce(function(e,t){return e.push.apply(e,t.expr),e},[]))})},collapseEmpty:function(e){return u(e,function(e,t,n){return e.expr&&0===e.expr.length})},collapse1LenExprAfterWrite:function(e){return u(e,function(e,t,n){return" = "===e.token&&n[t+1]&&n[t+1].expr&&1===n[t+1].expr.length&&n[t+1].expr[0]})},collapseLines:function(e){return u(e,function(e){return e.expr&&1===e.expr.length&&e.expr[0]instanceof y&&e.expr[0]})},collapseExprAroundLocal:function(e){return u(e,function(e){return e.expr&&1===e.expr.length&&e.expr[0].name&&!k(e)&&e.expr[0]})},collapseExprAroundLiteral:function(e){return u(e,function(e){return e.expr&&1===e.expr.length&&"literal"===e.expr[0].type&&!k(e)&&e.expr[0]})},eliminateMul0:function(e){return u(e,function(e){return e.op&&" * "===e.op.token&&(0===e.left.value||0===e.right.value)&&E(0)})},reduceMul1:function(e){return u(e,function(e){return e.op&&" * "===e.op.token&&(1===e.left.value&&e.right||1===e.right.value&&e.left)})},reduceAdd0:function(e){return u(e,function(e){return"expression"===e.type&&e.expr.find(function(e){return" + "===e.token})&&e.expr.find(function(e){return 0===e.value})&&e.expr.find(function(e){return 0!==e.value&&"token"!==e.type})})},reduceOpLiteral:function(e){return u(e,function(e){return"expression"===e.type&&5===e.expr.length&&"literal"===e.expr[1].type&&"literal"===e.expr[3].type&&(" + "===e.expr[2].token&&E(JSON.stringify(JSON.parse(e.expr[1].value)+JSON.parse(e.expr[3].value)))||" - "===e.expr[2].token&&E(JSON.stringify(JSON.parse(e.expr[1].value)-JSON.parse(e.expr[3].value)))||" * "===e.expr[2].token&&E(JSON.stringify(JSON.parse(e.expr[1].value)*JSON.parse(e.expr[3].value)))||" / "===e.expr[2].token&&E(JSON.stringify(JSON.parse(e.expr[1].value)/JSON.parse(e.expr[3].value))))})},emulate:function(e){for(var t,n=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o(this,e),this.map={},this.args={},this.parent=t,this.child=null,this.depth=n}return e.prototype.read=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.map[e]&&this.map[e][1]&&(this.map[e][1]._read=(this.map[e][1]._read||0)+1),this.parent&&1!==t&&this.parent.read(e,-1),this.child&&-1!==t&&this.child.read(e,1)},e.prototype.get=function(e){return this.map[e]?this.map[e][0]:null},e.prototype.set=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0===r||this.map[e])&&(this.map[e]=[t,n||this.map[e][1]]),this.parent&&1!==r&&this.parent.set(e,null,null,-1),this.child&&-1!==r&&this.child.set(e,null,null,1)},e.prototype._nullAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;for(var t in this.map)this.map[t]=[null,this.map[t][1]];this.parent&&1!==e&&this.parent._nullAll(-1),this.child&&-1!==e&&this.child._nullAll(1)},e.prototype.isArg=function(e){return!!Boolean(this.args[e])||!!this.parent&&this.parent.isArg(e)},e.prototype.setArg=function(e){this.args[e]=!0},e.prototype.push=function(){if(this.child)for(var t in this.child.map)this.child.map[t][1]._read=(this.child.map[t][1]._read||0)+1,this.child.map[t]=[null,this.child.map[t][1]];else this.child=new e(this,this.depth+1);return this.child},e.prototype.pop=function(){return this.parent},e}(),r=function(){function e(){o(this,e),this.root=this.inner=new n}return e.prototype.read=function(e){this.inner.read(e)},e.prototype.get=function(e){return this.inner.get(e)},e.prototype.set=function(e,t,n){return this.inner.set(e,t,n)},e.prototype.isArg=function(e){return this.inner.isArg(e)},e.prototype.setArg=function(e){this.inner.setArg(e)},e.prototype.push=function(){this.inner=this.inner.push()},e.prototype.pop=function(){this.inner=this.inner.pop()},e}(),a=new r,u=0;e.args&&u<e.args.length;u++)a.setArg(e.args[u]);var l=function e(t,n){if(n.name===t)return!0;if(n.expr)for(var r=0;r<n.expr.length;r++)if(e(t,n.expr[r]))return!0;return!1},c=function(e,t,n){e.name&&(n.expr[t+1]&&" = "!==n.expr[t+1].token||!n.expr[t+1])&&a.read(e.name)},s=function e(t,n,r){if(!t)return!1;if(t.constant)return!1;if(-1!==r.indexOf(t.token)||t.name&&n.isArg(t.name)||void 0!==t.value&&!(t instanceof x)||t.name&&-1!==t.name.indexOf("_arg_constant"))return!0;if(t.expr){for(var a=0;a<t.expr.length;a++)if(!1===e(t.expr[a],n,r))return!1;return!0}return!1},p=function(e,t){return e.expr&&"Math.min("===e.expr[0].token?s(e,t,["Math.min(",", ",")"]):e.expr&&e.expr.find(function(e){return")("===e.token})?s(e,t,["(",")",")(",", "]):s(e,t,["(",")",")("])},f=function e(t,n){var r=0;if(n(t)&&(r+=1),t.expr)for(var a=0;a<t.expr.length;a++)r+=e(t.expr[a],n);return r},d=[],m=f(e,function(e){return e.constant});!function e(t,n,r){if(t){if(c(t,n,r),t.expr)if(t.expr.find(function(e){return"function("===e.token}))for(var o=0;o<t.expr.length;o++)t.expr[o].name&&a.setArg(t.expr[o].name);else for(var u=0;u<t.expr.length;u++)c(t.expr[u],u,t);if("{"===t.token)a.push();else if("}"===t.token)a.pop();else if("local"===t.type)return a.get(t.name)?q(a.get(t.name)):t;if("literal"===t.type)return t;if(t.expr){if(p(t,a)&&f(t,function(e){return!e.name&&!e.expr})&&f(t,function(e){return e.name&&a.isArg(e.name)})){if(d.find(function(e){return String(t)===e[1]})){var s=d.find(function(e){return String(t)===e[1]});return t.expr=[s[0]],s[0]}var x=w("_arg_constant"+m++),v=[x,String(t),j(S([O(x),x,_(" = "),S(t.expr)]))];return i(v[2],function(e){e.constant=!0}),d.push(v),t.expr=[x],x}if(t.expr[0]&&t.expr[0].name&&t.expr[1]&&" = "===t.expr[1].token){var y=e(t.expr[2],2,t);if(a.get(t.expr[0].name)===y)return void(t.expr=[]);if(y&&!l(t.expr[0].name,y)){if(a.get(t.expr[0].name)===y)throw new Error("setting identical value already at variable");t.lastRead=t._read,t.read=0,t._read=0,a.set(t.expr[0].name,y,t)}else t.lastRead=t._read,t.read=0,t._read=0,a.set(t.expr[0].name,null,t)}else if(t.expr[1]&&t.expr[1].name&&t.expr[2]&&" = "===t.expr[2].token){if(0===t._read)return void(t.expr=[]);var h=e(t.expr[3],3,t);if(a.get(t.expr[1].name)===h)return void(t.expr=[]);if(h&&!l(t.expr[1].name,h)){if(a.get(t.expr[1].name)===h)throw new Error("setting identical value already at variable");t.lastRead=t._read,t.read=0,t._read=0,a.set(t.expr[1].name,h,t)}else t.lastRead=t._read,t.read=0,t._read=0,a.set(t.expr[1].name,null,t)}else if(t.expr[2]&&" = "===t.expr[2].token){e(t.expr[0],0,t);var g=e(t.expr[3],3,t);g&&(t.expr[3]=g)}else{if(3===t.expr.length&&"("===t.expr[0].token&&")"===t.expr[2].token)return e(t.expr[1],1,t);if(1===t.expr.length&&"local"===t.expr[0].type)return e(t.expr[0],0,t);if(1===t.expr.length&&"literal"===t.expr[0].type)return t.expr[0];if(1===t.expr.length)return e(t.expr[0],0,t);if(!t.expr[2]||" - "!==t.expr[2].token&&" * "!==t.expr[2].token&&" / "!==t.expr[2].token){if(t.expr[2]&&" + "===t.expr[2].token){var b=void 0,k=void 0;if("expression"===t.expr[1].type){if(t.expr[1]===t)throw new Error("circular expression");if((b=e(t.expr[1],1,t))===t)throw new Error("returned circular expr1");b&&(t.expr[1]=b)}else if("local"===t.expr[1].type&&t.expr[1].name&&a.get(t.expr[1].name)){if((b=e(t.expr[1],1,t))===t)throw new Error("returned circular local1");b&&b!==t&&(t.expr[1]=b)}if("expression"===t.expr[3].type){if((k=e(t.expr[3],3,t))===t)throw new Error("returned circular expr3");k&&(t.expr[3]=k)}else if("local"===t.expr[3].type&&t.expr[3].name&&a.get(t.expr[3].name)){if((k=e(t.expr[3],3,t))===t)throw new Error("returned circular local3");k&&(t.expr[3]=k)}if(t.expr[1]&&"literal"===t.expr[1].type&&t.expr[3]&&"literal"===t.expr[3].type)return E(JSON.stringify(JSON.parse(t.expr[1].value)+JSON.parse(t.expr[3].value)));if(t.expr[1]&&"expression"===t.expr[1].type&&t.expr[3]&&"literal"===t.expr[3].type){if(t.expr[1].expr[2]&&" + "===t.expr[1].expr[2].token&&t.expr[1].expr[3]&&"literal"===t.expr[1].expr[3].type)return S([t.expr[1].expr[0],t.expr[1].expr[1],t.expr[1].expr[2],e(S([t.expr[1].expr[0],t.expr[1].expr[3],t.expr[1].expr[2],t.expr[3],t.expr[1].expr[4]]),3,t.expr[1]),t.expr[1].expr[4]]);if('""'===t.expr[3].value&&t.expr[1])return t.expr[1]}if(t.expr[1]&&"literal"===t.expr[1].type&&t.expr[3]&&"expression"===t.expr[3].type){if(t.expr[3].expr[2]&&" + "===t.expr[3].expr[2].token&&t.expr[3].expr[1]&&"literal"===t.expr[3].expr[1].type)return S([t.expr[3].expr[0],e(S([t.expr[3].expr[0],t.expr[1],t.expr[3].expr[2],t.expr[3].expr[1],t.expr[3].expr[4]]),1,t.expr[3]),t.expr[3].expr[2],t.expr[3].expr[3],t.expr[3].expr[4]]);if('""'===t.expr[1].value&&t.expr[3])return t.expr[3]}return t}if("declare"!==t.type)for(var A=0;A<t.expr.length;A++)try{e(t.expr[A],A,t)}catch(e){throw console.error(String(t.expr[A])),console.error(e.stack||e),e}}else{var N=void 0,J=void 0;if("expression"===t.expr[1].type){if(t.expr[1]===t)throw new Error("circular expression");if((N=e(t.expr[1],1,t))===t)throw new Error("returned circular expr1");N&&(t.expr[1]=N)}else if("local"===t.expr[1].type&&t.expr[1].name&&a.get(t.expr[1].name)){if((N=e(t.expr[1],1,t))===t)throw new Error("returned circular local1");N&&N!==t&&(t.expr[1]=N)}if("expression"===t.expr[3].type){if((J=e(t.expr[3],3,t))===t)throw new Error("returned circular expr3");J&&(t.expr[3]=J)}else if("local"===t.expr[3].type&&t.expr[3].name&&a.get(t.expr[3].name)){if((J=e(t.expr[3],3,t))===t)throw new Error("returned circular local3");J&&(t.expr[3]=J)}if(t.expr[1]&&"literal"===t.expr[1].type&&t.expr[3]&&"literal"===t.expr[3].type){if(" - "===t.expr[2].token)return E(JSON.stringify(JSON.parse(t.expr[1].value)-JSON.parse(t.expr[3].value)));if(" * "===t.expr[2].token)return E(JSON.stringify(JSON.parse(t.expr[1].value)*JSON.parse(t.expr[3].value)));if(" / "===t.expr[2].token)return E(JSON.stringify(JSON.parse(t.expr[1].value)/JSON.parse(t.expr[3].value)))}if(t.expr[1]&&"literal"===t.expr[1].type){if(" * "===t.expr[2].token&&1===JSON.parse(t.expr[1].value))return t.expr[3];if(" * "===t.expr[2].token&&0===JSON.parse(t.expr[1].value))return t.expr[1]}if(t.expr[3]&&"literal"===t.expr[3].type){if(" * "===t.expr[2].token&&1===JSON.parse(t.expr[3].value))return t.expr[1];if(" * "===t.expr[2].token&&0===JSON.parse(t.expr[3].value))return t.expr[3]}}}}}}(e),(t=e.expr).splice.apply(t,[0,0].concat(d.map(function(e){return e[2]})))},eliminateCanceledTerms:function(e){return u(e,function(e){return e.op&&" + "===e.op.token&&e.left.op&&" - "===e.left.op.token&&e.left.right.name===e.right.name&&e.left.left})},collapseParantheses:function(e){return u(e,function(e){return"expression"===e.type&&3===e.expr.length&&"("===e.expr[0].token&&")"===e.expr[2].token&&"expression"===e.expr[1].type&&e.expr[1].expr.length>=3&&"("===e.expr[1].expr[0].token&&")"===e.expr[1].expr[e.expr[1].expr.length-1].token&&S(e.expr[1].expr.slice(1,e.expr[1].expr.length-1))})},combineCommaWithExpr:function(e){return u(e,function(e){return"expression"===e.type&&2===e.expr.length&&"expression"===e.expr[0].type&&", "===e.expr[1].token&&(1===e.expr[0].expr.length&&"expression"===e.expr[0].expr[0].type&&(1===e.expr[0].expr[0].length&&"expression"===e.expr[0].expr[0].expr[0].type&&S(e.expr[0].expr[0].expr[0].expr.concat(_(", ")))||S(e.expr[0].expr[0].expr.concat(_(", "))))||S(e.expr[0].expr.concat(_(", "))))})},replaceMirrorAssignments:function(e){e.depth=0,i(e,function(e,t,n){e.depth=n.depth+1}),u(e,function(t){return"declare"===t.type&&i(e,function(e){return"declare"===e.type&&e.local===t.local&&e.depth<t.depth})}),i(e,function(e,t,n){if(e.expr&&1===e.expr.length&&e.expr[0].expr&&e.expr[0].expr.find(function(e){return"declare"===e.type})){var r=e.expr[0].expr&&e.expr[0].expr.find(function(e){return"declare"===e.type}),a=0;if(i(n,function(e,t,n){e.name===r.local.name&&n.expr[t+1]&&" = "===n.expr[t+1].token&&(a+=1)}),1===a&&4===e.expr[0].expr.length&&"local"===e.expr[0].expr[3].type){var o=e.expr[0].expr[3].name;u(n,function(e){return e.name===r.local.name&&w(o)})}}})},removeEqualAssignments:function(e){return u(e,function(e,t,n){return"expression"===e.type&&(4===e.expr.length&&"local"===e.expr[1].type&&" = "===e.expr[2].token&&"local"===e.expr[3].type&&e.expr[1].name===e.expr[3].name||3===e.expr.length&&"local"===e.expr[0].type&&" = "===e.expr[1].token&&"local"===e.expr[2].type&&e.expr[0].name===e.expr[2].name)})}},ce={symantics:["collapseExpressions","collapseParantheses","combineCommaWithExpr","removeEqualAssignments"],math:["eliminateCanceledTerms","eliminateMul0","reduceAdd0","reduceMul1"],locals:["removeUnusedLocals","replaceMirrorAssignments"]},se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e="function"==typeof e?s.func(e.args[0],[e.apply(void 0,e.args.slice(1))]):s.func([],[e]);var n={_body:"",_pointer:[],pointer:null,stack:[],args:null,scope:{},locals:{},names:{},vars:[],options:t};n.context=n,n.compile=ue.bind(null,n),n.lookupScope=function(e){return C(n.stack,n.scope,e)};var r=n.compile(e),a=void 0;try{a=new Function("return "+r.toString()+";")()}catch(e){throw console.log(e.stack||e),console.log(""+r.toString()),e}return a.toAst=function(){return r},a};e.exports=se},function(e,t,n){var r=function e(t){function n(e){return Object.setPrototypeOf(e,n.prototype)}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.prototype=Object.create(Function.prototype),n.prototype.constructor=n;var a={},o=r;Object.defineProperties(r,{create:{enumerable:!1,value:function(t,n){return"function"==typeof t?e(function(){return Object.assign({},a,t())},n):e(Object.assign({},a,t),n)}},register:{enumerable:!1,value:function(e,t){return a[e]=t,o[e]=new n(function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return new n(t.call.apply(t,[this].concat(r)))}),n.prototype[e]=new n(function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return new n(t.call.apply(t,[this,this].concat(r)))}),o[e]}},cast:{enumerable:!1,value:function(e){return new n(function(){return new n(e.bind())()})}},context:{enumerable:!1,value:function(e){return e(o)}},freeze:{enumerable:!1,value:function(){return Object.freeze(a),Object.freeze(o),Object.freeze(n.prototype),o}},toString:{enumerable:!1,value:function(){return"{"+Object.entries(a).map(function(e){return e[0]+": "+e[1].toString()}).join(",\n")+"}"}}});var i=t;"function"==typeof t&&(i=t());for(var u in i)o.register(u,i[u]);return o};e.exports=r,e.exports.create=r},function(e,t){var n=function(e){var t=e.pointer;return JSON.parse(JSON.stringify(t.value))},r=function(e){var t=e.run,n=e.scope,r=e.pointer;return n[r.name]=t(r.value)},a=function(e){return e.scope[e.pointer.name]},o=function(e){var t=e.run,n=e.pointer;return t(n.ref)[t(n.member)]=t(n.value)},i=function(e){var t=e.run,n=e.pointer;return t(n.ref)[t(n.member)]},u={"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t},min:function(e,t){return Math.min(e,t)},max:function(e,t){return Math.max(e,t)}},l=function(e){var t=e.run,n=e.pointer;return u[n.operator](t(n.right))},c=function(e){var t=e.run,n=e.pointer;return u[n.operator](t(n.left),t(n.right))},s=function(e){for(var t=e.run,n=e.scope,r=e.pointer,a=Object.entries(r.iterable),o=void 0,i=a,u=Array.isArray(i),l=0,i=u?i:i[Symbol.iterator]();;){var c;if(u){if(l>=i.length)break;c=i[l++]}else{if(l=i.next(),l.done)break;c=l.value}var s=c;n[r.keys[0]]=s[0],n[r.keys[1]]=s[1],o=t(r.body)}return o},p=function(e){var t=e.run,n=e.pointer;return t(t(n.test)?n.body:n.else)},f=function(e){for(var t=e.run,n=e.pointer,r=void 0,a=n.body,o=Array.isArray(a),i=0,a=o?a:a[Symbol.iterator]();;){var u;if(o){if(i>=a.length)break;u=a[i++]}else{if(i=a.next(),i.done)break;u=i.value}r=t(u)}return r},d=function(e){var t=e.run,n=e.context,r=e.pointer,a=r.func.op?t(r.func):r.func;n.stack.push(n.scope),n.scope=r.args.map(t);var o=t(a);return n.scope=n.stack.pop(),o},m=function(e){var t=e.run,n=e.scope,r=e.pointer,a=e.context;return a.scope={},r.args.forEach(function(e,t){a.scope[e]=n[t]}),t(r.body)},x=function(e){var t=e.run;e.func;return t(e.pointer.methods.main)},v={literal:n,write:r,read:a,store:o,load:i,unary:l,binary:c,for_of:s,branch:p,body:f,call:d,func:m,methods:x},y=function(e,t){e._pointer.push(t),e.pointer=t;var n=void 0;return"function"==typeof t?n=t.apply(void 0,e.scope):t.op&&(n=v[t.op](e)),e._pointer.pop(t),n},h=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var o={func:t,_pointer:[],pointer:null,stack:[],scope:r};return o.context=o,o.run=y.bind(null,o),o.run(e)};e.exports=h},function(e,t,n){var r=n(1),a=n(0),o=a(r),i=n(2),u=r.r,l=[["fn"],u("fn")],c=o.context(function(e){var t=e.methods,n=e.func,r=e.call,a=e.l,o=e.r;return function(e){return t({main:n(["element","state","animated"],[r(a(e),[o("element"),o("state"),o("animated")])]),copy:e.copy||e.methods&&e.methods.copy||n(["dest","src"],[o("src")])})}});c.args=l;var s=[["set"],u("set")],p=o.context(function(e){var t=e.methods,n=e.func,r=e.for_of,a=e.call,o=e.r,i=e.lo,u=e.w,l=e.l;e.branch,e.and;return function(e){return t({main:n(["element","state","animated"],[r(e,["key","value"],[u("state",a(o("value"),[o("element"),o("state"),o("animated")]))]),o("state")]),copy:n(["dest","src"],[r(e,["key","value"],[u("dest",a(i(o("value"),l("copy")),[o("dest"),o("src")]))]),o("dest")])})}});p.args=s;var f=["abs","add","sub","mul","div","mod","min","max","eq","ne","lt","lte","gt","gte"].map(o.context(function(e){var t=e.l,n=e.r;return function(e){return i[e](c,function(e){return t(e)},["element","state","animated"],[n("element"),n("state"),n("animated")])}})),d=f[0],m=f[1],x=f[2],v=f[3],y=f[4],h=f[5],g=f[6],b=f[7],k=f[8],_=f[9],w=f[10],O=f[11],j=f[12],S=f[13],A=[[]],E=o.context(function(e){var t=e.func,n=e.r;return function(){return c(t(["state"],[n("state")]))}});E.args=A;var N=[["c"],u("c")],J=o.context(function(e){var t=e.func,n=e.l;return function(e){return c(t([],[n(e)]))}});J.args=N;var q=[["key"],u("key")],R=o.context(function(e){var t=e.func,n=e.lo,r=e.r,a=e.l;return function(e){return c(t(["element"],[n(r("element"),a(e))]))}});R.args=q;var z=o.context(function(e){var t=e.methods,n=e.func,r=e.w,a=e.r,o=e.or,i=e.l,u=e.for_of,l=e.st,c=e.call,s=e.lo;return function(e,p){return t({main:n(["element","state","animated"],p),copy:n(["dest","src"],[r("dest",o(a("dest"),i({}))),u(e,["key","value"],[l(a("dest"),a("key"),c(s(a("value"),i("copy")),[s(a("dest"),a("key")),s(a("src"),a("key"))]))]),a("dest")])})}}),P=[["obj"],u("obj")],M=o.context(function(e){var t=(e.methods,e.func,e.w),n=e.r,r=e.or,a=e.l,o=e.for_of,i=e.st,u=e.call,l=e.lo;return function(e){return z(e,[t("state",r(n("state"),a({}))),o(e,["key","value"],[i(n("state"),n("key"),u(n("value"),[n("element"),l(n("state"),n("key")),n("animated")]))]),n("state")])}});M.args=P;var F=[["obj"],u("obj")],L=o.context(function(e){var t=(e.methods,e.func,e.w),n=e.r,r=e.or,a=e.l,o=e.for_of,i=e.st,u=e.call,l=e.lo,c=e.branch,s=e.ne,p=e.body;return function(e){return z(e,[t("state",r(n("state"),a({}))),t("rootElement",l(l(l(n("animated"),a("animated")),a("root")),a("element"))),o(e,["key","value"],[i(l(n("animated"),a("animated")),n("key"),r(l(l(n("animated"),a("animated")),n("key")),a({}))),c(s(n("key"),a("root")),[i(l(l(n("animated"),a("animated")),n("key")),a("element"),l(u(l(n("rootElement"),a("getElementsByClassName")),[n("key")]),a(0)))]),i(n("state"),n("key"),u(n("value"),[l(l(l(n("animated"),a("animated")),n("key")),a("element")),l(n("state"),n("key")),n("animated")])),p([])]),n("state")])}});L.args=F;var B=[["obj"],u("obj")],T=o.context(function(e){var t=e.methods,n=e.func,r=e.w,a=e.r,o=e.or,i=e.l,u=e.for_of,l=e.st,c=e.call,s=e.lo,p=e.branch,f=e.body,d=e.loop,m=e.lt,x=e.add;return function(e){return t({main:n(["element","state","animated"],[r("state",o(a("state"),i({}))),r("rootElement",s(s(s(a("animated"),i("animated")),i("root")),i("element"))),u(e,["key","value"],[l(s(a("animated"),i("animated")),a("key"),o(s(s(a("animated"),i("animated")),a("key")),i({}))),l(s(s(a("animated"),i("animated")),a("key")),i("elements"),o(s(s(s(a("animated"),i("animated")),a("key")),i("elements")),i([]))),l(s(s(s(a("animated"),i("animated")),a("key")),i("elements")),i("length"),i(0)),r("dest",s(s(s(a("animated"),i("animated")),a("key")),i("elements"))),r("src",c(s(a("rootElement"),i("getElementsByClassName")),[a("key")])),l(a("state"),a("key"),o(s(a("state"),a("key")),i([]))),r("state",s(a("state"),a("key"))),r("i",i(0)),d(m(a("i"),s(a("src"),i("length"))),[c(s(a("dest"),i("push")),[s(a("src"),a("i"))]),l(a("state"),a("i"),c(a("value"),[s(a("dest"),a("i")),s(a("state"),a("i")),a("animated")])),r("i",x(a("i"),i(1)))]),p(a("i"),[]),f([])]),a("state")]),copy:n(["dest","src"],[r("dest",o(a("dest"),i({}))),u(e,["key","value"],[l(a("dest"),a("key"),o(s(a("dest"),a("key")),i([]))),r("dest2",s(a("dest"),a("key"))),r("src",s(a("src"),a("key"))),r("i",i(0)),d(m(a("i"),s(a("src"),i("length"))),[l(a("dest2"),a("i"),c(s(a("value"),i("copy")),[s(a("dest2"),a("i")),s(a("src"),a("i"))])),r("i",x(a("i"),i(1)))]),p(a("i"),[]),f([])]),a("dest")])})}});T.args=B;var C=[["obj"],u("obj")],I=o.context(function(e){var t=(e.methods,e.func,e.w),n=e.r,r=e.or,a=e.l,o=e.for_of,i=e.st,u=e.call,l=e.lo;return function(e){return z(e,[t("state",r(n("state"),a({}))),o(e,["key","value"],[i(n("state"),n("key"),u(n("value"),[l(n("element"),n("key")),n("state"),n("animated")]))]),n("state")])}});I.args=C;var W=[["a","b"],u("a"),u("b")],U=o.context(function(e){var t=e.methods,n=e.func,r=e.call,a=e.l,o=e.r,i=e.lo;return function(e,u){return t({main:n(["element","state","animated"],[r(a(u),[r(a(e),[o("element"),o("state"),o("animated")]),o("state"),o("animated")])]),copy:n(["dest","src"],[r(i(a(u),a("copy")),[o("dest"),o("src")])])})}});U.args=W;var D={left:E(),top:E(),right:E(),bottom:E(),width:E(),height:E()},G=[[]],H=o.context(function(e){var t=e.methods,n=e.func,r=e.w,a=e.call,o=e.lo,i=e.r,u=e.l,l=e.st,c=e.add,s=e.or,p=e.for_of;return function(){return t({main:n(["element","state"],[r("_rect",a(o(i("element"),u("getBoundingClientRect")),[])),r("_scrollLeft",o(i("element"),u("scrollLeft"))),r("_scrollTop",o(i("element"),u("scrollTop"))),r("rect",s(i("state"),u({}))),l(i("rect"),u("left"),c(o(i("_rect"),u("left")),i("_scrollLeft"))),l(i("rect"),u("top"),c(o(i("_rect"),u("top")),i("_scrollTop"))),l(i("rect"),u("right"),c(o(i("_rect"),u("right")),i("_scrollLeft"))),l(i("rect"),u("bottom"),c(o(i("_rect"),u("bottom")),i("_scrollTop"))),l(i("rect"),u("width"),o(i("_rect"),u("width"))),l(i("rect"),u("height"),o(i("_rect"),u("height"))),i("rect")]),copy:n(["dest","src"],[r("dest",s(i("dest"),u({}))),p(D,["key","value"],[l(i("dest"),i("key"),o(i("src"),i("key")))]),i("dest")])})}});H.args=G;var K=[["fn","compare"],u("fn"),u("compare")],Q=o.context(function(e){var t=e.methods,n=e.func,r=e.call,a=e.l,o=e.r,i=e.lo;return function(e,u){return t({main:n(["element","state","animated"],[r(a(e),[o("element"),o("state"),o("animated")])]),copy:n(["dest","src"],[r(i(i(a(e),a("methods")),a("copy")),[o("dest"),o("src")])]),should:n(["a","b"],[r(a(u),[o("a"),o("b")])])})}});Q.args=K,e.exports={value:c,union:p,abs:d,add:m,sub:x,mul:v,div:y,mod:h,min:g,max:b,eq:k,ne:_,lt:w,lte:O,gt:j,gte:S,identity:E,constant:J,property:R,object:M,elements:L,elementArrays:T,properties:I,asElement:U,byElement:U,rect:H,should:Q}},function(e,t,n){e.exports=n(12)},function(e,t,n){var r=n(0),a=n(13);e.exports=r(a)},function(e,t,n){var r=n(1),a=n(0),o=a(r),i=n(2),u=r.r,l=[["fn"],u("fn")],c=o.context(function(e){var t=e.methods,n=e.func,r=e.call,a=e.r,o=e.l,i=(e.read,e.eq);return function(e){return t({main:n(["t","state","begin","end"],[r(o(e),[a("t"),a("state"),a("begin"),a("end")])]),a:n(["a","t","state","begin","end"],[r(o(e),[a("t"),a("state"),a("begin"),a("end")])]),eq:n(["t","state","begin","end"],[i(r(o(e),[a("t"),a("state"),a("begin"),a("end")]),r(o(e),[o(1),a("state"),a("begin"),a("end")]))])})}});c.args=l;var s=[["fn"],u("fn")],p=o.context(function(e){var t=e.methods,n=e.func,r=e.call,a=e.l,o=e.r,i=e.write,u=e.add,l=e.mul,c=e.sub,s=e.min,p=e.gte;return function(e){return t({main:n(["t","state","begin","end"],[r(a(e),[o("t"),o("state"),o("begin"),o("end")])]),a:n(["a","t","state","begin","end"],[i("b",r(a(e),[o("t"),o("state"),o("begin"),o("end")])),i("e",r(o("a"),[o("t"),o("state"),o("begin"),o("end")])),u(l(c(o("e"),o("b")),s(a(1),o("t"))),o("b"))]),eq:n(["t","state","begin","end"],[p(o("t"),a(1))])})}});p.args=s;var f=[["set"],u("set")],d=o.context(function(e){var t=e.methods,n=e.func,r=e.for_of,a=e.call,o=e.r,i=e.lo,u=e.w,l=e.l,c=e.branch,s=e.and;return function(e){return t({main:n(["t","state","begin","end"],[r(e,["key","value"],[a(o("value"),[o("t"),o("state"),o("begin"),o("end")])]),o("state")]),set:t(e),a:n(["a","t","state","begin","end"],[r(e,["key","value"],[a(i(o("value"),l("a")),[i(i(o("a"),l("set")),o("key")),o("t"),o("state"),o("begin"),o("end")])]),o("state")]),eq:n(["t","state","begin","end"],[u("result",l(!0)),r(e,["key","value"],[c(s(o("result"),a(i(o("value"),l("eq")),[o("t"),o("state"),o("begin"),o("end")])),[u("result",l(!1))])]),o("result")])})}});d.args=f;var m=["abs","add","sub","mul","div","mod","min","max","eq","ne","lt","lte","gt","gte"].map(o.context(function(e){var t=e.l,n=e.r;return function(e){return i[e](p,function(e){return t(e)},["t","state","begin","end"],[n("t"),n("state"),n("begin"),n("end")])}})),x=m[0],v=m[1],y=m[2],h=m[3],g=m[4],b=m[5],k=m[6],_=m[7],w=m[8],O=m[9],j=m[10],S=m[11],A=m[12],E=m[13],N=[["c"],u("c")],J=o.context(function(e){var t=e.func,n=e.l;return function(e){return p(t([],[n(e)]))}});J.args=N;var q=[["pos"],u("pos")],R=o.context(function(e){var t=e.func,n=e.l,r=e.r,a=e.add,o=e.mul,i=e.sub;return function(e){return p(t(["t","state","begin","end"],[a(o(i(r("end"),r("begin")),n(e)),r("begin"))]))}});R.args=q;var z=[[]],P=o.context(function(){return function(){return R(0)}});P.args=z;var M=[[]],F=o.context(function(){return function(){return R(1)}});F.args=M;var L=[["[a, b]"],[u("a"),u("b")]],B=o.context(function(e){var t=e.func,n=e.l,r=e.call,a=e.lo,o=e.r,i=e.methods;return function(e){var u=e[0],l=e[1];return i({main:t(["t","state","begin","end"],[r(a(n(u),n("a")),[n(l),o("t"),o("state"),o("begin"),o("end")])]),a:t(["a","t","state","begin","end"],[r(a(n(u),n("a")),[n(l),o("t"),o("state"),o("begin"),o("end")])]),eq:t(["t","state","begin","end"],[r(a(n(l),n("eq")),[o("t"),o("state"),o("begin"),o("end")])])})}});B.args=L;var T=[["obj"],u("obj")],C=o.context(function(e){var t=e.methods,n=e.func,r=e.l,a=e.lo,o=e.for_of,i=e.store,u=e.read,l=e.call,c=e.branch,s=e.literal,p=(e.eq,e.load,e.r),f=e.write,d=e.w,m=e.and;return function(e){return t({main:n(["t","state","begin","end"],[o(e,["key","value"],[i(p("state"),p("key"),l(p("value"),[p("t"),a(p("state"),p("key")),a(p("begin"),p("key")),a(p("end"),p("key"))]))]),u("state")]),o:t(e),a:n(["b","t","state","begin","end"],[o(e,["key","value"],[i(p("state"),p("key"),l(a(p("value"),r("a")),[a(a(p("b"),r("o")),p("key")),p("t"),a(p("state"),p("key")),a(p("begin"),p("key")),a(p("end"),p("key"))]))]),u("state")]),eq:n(["t","state","begin","end"],[f("result",s(!0)),o(e,["key","value"],[c(m(p("result"),l(a(p("value"),r("eq")),[p("t"),a(p("state"),p("key")),a(p("begin"),p("key")),a(p("end"),p("key"))])),[d("result",r(!1))])]),u("result")])})}});C.args=T;var I=[["fn"],u("fn")],W=o.context(function(e){var t=e.methods,n=e.func,r=e.w,a=e.l,o=e.loop,i=e.lt,u=e.r,l=e.lo,c=e.call,s=e.branch,p=e.add,f=e.and;return function(e){return t({main:n(["t","state","begin","end"],[r("i",a(0)),o(i(u("i"),l(u("state"),a("length"))),[c(a(e),[u("t"),l(u("state"),u("i")),l(u("begin"),u("i")),l(u("end"),u("i"))]),r("i",p(u("i"),a(1)))]),s(u("i"),[]),u("state")]),fn:e,a:n(["a","t","state","begin","end"],[r("i",a(0)),o(i(u("i"),l(u("state"),a("length"))),[c(l(a(e),a("a")),[l(u("a"),a("fn")),u("t"),l(u("state"),u("i")),l(u("begin"),u("i")),l(u("end"),u("i"))]),r("i",p(u("i"),a(1)))]),s(u("i"),[]),u("state")]),eq:n(["t","state","begin","end"],[r("result",a(!0)),r("i",a(0)),o(i(u("i"),l(u("state"),a("length"))),[s(f(u("result"),c(l(a(e),a("eq")),[u("t"),l(u("state"),u("i")),l(u("begin"),u("i")),l(u("end"),u("i"))])),[r("result",a(!1))]),r("i",p(u("i"),a(1)))]),s(u("i"),[]),u("result")])})}});W.args=I;var U=[["fn","tfn"],u("fn"),u("tfn")],D=o.context(function(e){var t=e.methods,n=e.func,r=e.call,a=e.l,o=e.r,i=e.lo;return function(e,u){return t({main:n(["t","state","begin","end"],[r(a(e),[r(a(u),[o("t"),o("state"),o("begin"),o("end")]),o("state"),o("begin"),o("end")])]),a:n(["a","t","state","begin","end"],[r(i(a(e),a("a")),[o("a"),r(a(u),[o("t"),o("state"),o("begin"),o("end")]),o("state"),o("begin"),o("end")])]),eq:n(["t","state","begin","end"],[r(i(a(e),a("eq")),[r(a(u),[o("t"),o("state"),o("begin"),o("end")]),o("state"),o("begin"),o("end")])])})}});D.args=U;var G=[["fn"],u("fn")],H=o.context(function(e){var t=e.func,n=e.mul,r=e.r,a=e.w;return function(e){return D(e,t(["t"],[a("t",n(n(r("t"),r("t")),r("t"))),r("t")]))}});H.args=G;var K=[["fn"],u("fn")],Q=o.context(function(e){var t=e.func,n=e.mul,r=e.r,a=e.sub,o=e.w,i=e.l,u=e.add;return function(e){return D(e,t(["t"],[o("t",a(r("t"),i(1))),u(n(n(r("t"),r("t")),r("t")),i(1))]))}});Q.args=K;var V=[["fn"],u("fn")],X=o.context(function(e){var t=e.func,n=e.mul,r=e.r,a=e.add,o=e.sub,i=e.l,u=e.lt,l=e.branch,c=e.w;return function(e){return D(e,t(["t"],[c("out",r("t")),l(u(r("t"),i(.5)),[c("out",n(i(4),n(n(r("t"),r("t")),r("t"))))],[c("out",a(n(n(o(r("t"),i(1)),o(n(i(2),r("t")),i(2))),o(n(i(2),r("t")),i(2))),i(1)))]),r("out")]))}});X.args=V;var Y=o.context(function(e){var t=e.func,n=e.mul,r=e.l,a=e.r;e.w;return t(["x1","x2"],[n(r(3),a("x1"))])}),Z=o.context(function(e){var t=e.func,n=e.sub,r=e.mul,a=e.l,o=e.r;return t(["x1","x2"],[(0,e.w)("c",(0,e.call)(Y,[o("x1"),o("x2")])),n(r(a(3),n(o("x2"),o("x1"))),o("c"))])}),$=o.context(function(e){var t=e.func,n=e.sub,r=e.l,a=(e.mul,e.r),o=e.w,i=e.call;return t(["x1","x2"],[o("c",i(Y,[a("x1"),a("x2")])),o("b",i(Z,[a("x1"),a("x2")])),n(n(r(1),a("c")),a("b"))])}),ee=o.context(function(e){var t=e.func,n=e.mul,r=e.r,a=e.add,o=e.call,i=e.w;e.l;return t(["t","x1","x2"],[i("c",o(Y,[r("x1"),r("x2")])),i("b",o(Z,[r("x1"),r("x2")])),i("a",o($,[r("x1"),r("x2")])),n(r("t"),a(r("c"),n(r("t"),a(r("b"),n(r("t"),r("a"))))))])}),te=o.context(function(e){var t=e.func,n=e.add,r=e.call,a=e.r,o=e.mul,i=e.l,u=e.w;return t(["t","x1","x2"],[u("c",r(Y,[a("x1"),a("x2")])),u("b",r(Z,[a("x1"),a("x2")])),u("a",r($,[a("x1"),a("x2")])),n(a("c"),o(a("t"),n(o(i(2),a("b")),o(o(i(3),a("a")),a("t")))))])}),ne=o.context(function(e){var t=e.func,n=e.w,r=e.r,a=e.l,o=e.call,i=e.loop,u=e.and,l=e.lt,c=e.gte,s=e.abs,p=e.sub,f=e.div,d=e.add,m=e.branch;return t(["t","x1","x2"],[n("x",r("t")),n("i",a(0)),n("z",p(o(ee,[r("x"),r("x1"),r("x2")]),r("t"))),i(u(l(r("i"),a(14)),c(s(r("z")),a(.001))),[n("x",p(r("x"),f(r("z"),o(te,[r("x"),r("x1"),r("x2")])))),n("z",p(o(ee,[r("x"),r("x1"),r("x2")]),r("t"))),n("i",d(r("i"),a(1)))]),m(r("z"),[]),m(r("i"),[]),r("x")])}),re=[["fn","ax","ay","bx","by"],u("fn"),u("ax"),u("ay"),u("bx"),u("by")],ae=o.context(function(e){var t=e.func,n=e.call,r=e.r,a=e.l;e.w,e.methods;return function(e,o,i,u,l){return D(e,t(["t"],[n(ee,[n(ne,[r("t"),a(o),a(u)]),a(i),a(l)])]))}});ae.args=re;var oe=[["fn","duration"],u("fn"),u("duration")],ie=o.context(function(e){var t=e.methods,n=e.func,r=e.call,a=e.l,o=e.r,i=e.lo,u=e.div,l=e.gte,c=e.mod;return function(e,s){return t({main:n(["t","state","begin","end"],[r(a(e),[c(u(o("t"),a(s)),a(1)),o("state"),o("begin"),o("end")])]),a:n(["a","t","state","begin","end"],[r(i(a(e),a("a")),[o("a"),c(u(o("t"),a(s)),a(1)),o("state"),o("begin"),o("end")])]),eq:n(["t","state","begin","end"],[l(u(o("t"),a(s)),a(1))])})}});ie.args=oe;var ue=[["fn","until"],u("fn"),u("until")],le=o.context(function(e){var t=e.methods,n=e.func,r=e.call,a=e.l,o=(e.mod,e.div,e.r),i=e.lo,u=(e.mul,e.gte),l=e.w;return function(e,c){return t({main:n(["t","state","begin","end"],[r(a(e),[o("t"),o("state"),o("begin"),o("end")])]),a:n(["a","t","state","begin","end"],[r(i(a(e),a("a")),[o("a"),o("t"),o("state"),o("begin"),o("end")])]),eq:n(["t","state","begin","end"],[l("cmp",r(a(c),[o("t"),o("state"),o("begin"),o("end")])),u(o("cmp"),a(1))])})}});le.args=ue;var ce=[["a","b"],u("a"),u("b")],se=o.context(function(){return function(e,t){return B([e,t])}});se.args=ce;var pe=[["frames"],u("frames")],fe=o.context(function(e){var t=e.methods,n=e.func,r=e.w,a=e.r,o=e.l,i=e.for_of,u=e.lo,l=e.sub,c=e.add,s=e.branch,p=e.call,f=(e.not_last,e.lt,e.gte),d=e.lte,m=e.min,x=e.max,v=e.gt,y=e.and,h=e.or,g=e.mul;return function(e){return t({main:n(["t","state","begin","end"],[r("sum",p(o(n(["frames"],[r("s",o(0)),i(e,["_","value"],[r("s",c(a("s"),p(u(a("value"),o("t")),[])))]),a("s")])),[a("frames")])),r("out",a("state")),r("t",x(m(g(a("t"),a("sum")),a("sum")),o(0))),i(e,["_","value"],[s(y(v(a("_for_of_index"),o(0)),d(a("t"),o(0))),[r("out",p(u(u(o(e),l(a("_for_of_index"),o(1))),o("a")),[a("value"),c(a("t"),p(u(u(o(e),l(a("_for_of_index"),o(1))),o("t")),[])),a("state"),a("begin"),a("end")])),r("t",c(a("t"),o(1/0)))],[r("t",l(a("t"),p(u(a("value"),o("t")),[])))])]),s(a("t"),[]),a("out")]),a:n(["a","t","state","begin","end"],[r("sum",p(o(n(["frames"],[r("s",o(0)),i(e,["_","value"],[r("s",c(a("s"),p(u(a("value"),o("t")),[])))]),a("s")])),[a("frames")])),r("out",a("state")),r("t",x(m(g(a("t"),a("sum")),a("sum")),o(0))),i(e,["_","value"],[r("t",l(a("t"),p(u(a("value"),o("t")),[]))),s(d(a("t"),o(0)),[r("out",p(u(a("value"),o("a")),[h(u(o(e),c(a("_for_of_index"),o(1))),a("a")),c(a("t"),p(u(a("value"),o("t")),[])),a("state"),a("begin"),a("end")])),r("t",c(a("t"),o(1/0)))])]),s(a("t"),[]),a("out")]),eq:n(["t","state","begin","end"],[f(a("t"),o(1))])})}});fe.args=pe;var de=[["timer","fn"],u("timer"),u("fn")],me=o.context(function(e){var t=e.methods,n=e.func,r=e.call,a=e.l,o=e.r,i=e.lo,u=e.or;return function(e,l){return t({main:n(["t","state","begin","end"],[r(a(l),[r(a(e),[o("t")]),o("state"),o("begin"),o("end")])]),a:n(["a","t","state","begin","end"],[r(i(a(l),a("a")),[u(i(o("a"),a("fn")),o("a")),r(a(e),[o("t")]),o("state"),o("begin"),o("end")])]),fn:l,t:n([],[r(i(a(e),a("t")),[])]),eq:n(["t","state","begin","end"],[r(i(a(l),a("eq")),[r(a(e),[o("t")]),o("state"),o("begin"),o("end")])])})}});me.args=de;var xe=[["seconds","fn"],u("seconds"),u("fn")],ve=o.context(function(e){var t=e.methods,n=e.func,r=e.div,a=e.r,o=e.l;return function(e,i){return me(t({main:n(["t"],[r(a("t"),o(e))]),t:n([],[o(e)])}),i)}});ve.args=xe;var ye=[["ms","fn"],u("ms"),u("fn")],he=o.context(function(e){var t=e.methods,n=e.func,r=e.div,a=e.r,o=e.l,i=e.w;return function(e,u){return me(t({main:n(["t"],[i("denom",r(o(e),o(1e3))),r(a("t"),a("denom"))]),t:n([],[r(o(e),o(1e3))])}),u)}});he.args=ye;var ge=[["percent","fn"],u("percent"),u("fn")],be=o.context(function(e){var t=e.methods,n=e.func,r=e.div,a=e.r,o=e.l,i=e.w;return function(e,u){return me(t({main:n(["t"],[i("denom",r(o(e),o(100))),r(a("t"),a("denom"))]),t:n([],[r(o(e),o(100))])}),u)}});be.args=ge;var ke=[[]],_e=function(){return ie(fe([ve(.999,C({opacity:J(0)})),ve(.001,C({opacity:J(1)}))]),1)};_e.args=ke;var we=[[]],Oe=function(){return se(ve(.999,C({opacity:J(0)})),ve(.001,C({opacity:J(1)})))};Oe.args=we;var je=[[]],Se=function(){return se(C({opacity:ae(J(0),0,1,1,0),width:J(100)}),C({opacity:J(1),width:J(200)}))};Se.args=je;var Ae=[[]],Ee=function(){return se(C({opacity:X(J(0)),width:ae(J(100),0,1,1,0)}),C({opacity:J(1),width:J(200)}))};Ee.args=Ae,e.exports={value:c,lerp:p,union:d,abs:x,add:v,sub:y,mul:h,div:g,mod:b,min:k,max:_,eq:w,ne:O,lt:j,lte:S,gt:A,gte:E,constant:J,at:R,begin:P,end:F,fromTo:B,object:C,array:W,easing:D,easeIn:H,easeOut:Q,easeInOut:X,bezier:ae,duration:ie,to:se,keyframes:fe,frame:me,seconds:ve,ms:he,percent:be,keyframes_example:_e,object_to_example:Oe,bezier_example:Se,easeInOut_example:Ee,repeat:le}},function(e,t,n){e.exports=n(15)},function(e,t,n){var r=n(0),a=n(16);e.exports=r(a)},function(e,t,n){var r=n(1),a=n(0),o=a(r),i=n(2),u=r.r,l=[["fn"],u("fn")],c=o.context(function(e){var t=e.methods,n=e.func,r=e.call,a=e.l,o=e.r;e.or,e.lo,e.w,e.branch;return function(e){return t({main:n(["element","state","animated"],[r(a(e),[o("state"),o("animated")])]),_value:n(["state","animated"],[r(a(e),[o("state"),o("animated")])]),store:n(["state","element"],[o("element")]),restore:n(["element","state"],[o("state")])})}});c.args=l;var s=[["set"],u("set")],p=o.context(function(e){var t=e.methods,n=e.func,r=e.for_of,a=e.call,o=e.r,i=e.lo,u=e.w,l=e.l;e.branch,e.and;return function(e){var c;return t((c={main:n(["element","state","animated"],[r(e,["key","value"],[a(o("value"),[o("element"),o("state"),o("animated")])]),o("element")])},c.main=n(["state","element","animated"],[r(e,["key","value"],[u("state",a(i(o("value"),l("store")),[o("state"),o("element"),o("animated")]))]),o("state")]),c.main=n(["element","state","animated"],[r(e,["key","value"],[a(i(o("value"),l("restore")),[o("element"),o("state"),o("animated")])]),o("element")]),c))}});p.args=s;var f=[["c"],u("c")],d=o.context(function(e){var t=e.func,n=e.l;return function(e){return c(t([],[n(e)]))}});d.args=f;var m=[["key"],u("key")],x=o.context(function(e){var t=e.func,n=e.lo,r=e.r,a=e.l;return function(e){return c(t(["state"],[n(r("state"),a(e))]))}});x.args=m;var v=[["fn","suffix"],u("fn"),u("suffix")],y=o.context(function(e){var t=e.func,n=e.add,r=e.call,a=e.l,o=e.r,i=e.or,u=e.lo;return function(e,l){return c(t(["state","animated"],[n(r(i(u(a(e),a("_value")),a(e)),[o("state"),o("animated")]),a(l))]))}});y.args=v;var h=["em","percent","deg","rad","px","rem","vh","vmax","vmin","vw"].map(function(e){var t=function(t){return y(t,e)};return t.args=[["fn"],u("fn")],t}),g=h[0],b=h[1],k=h[2],_=h[3],w=h[4],O=h[5],j=h[6],S=h[7],A=h[8],E=h[9],N=o.context(function(e){var t=e.func,n=e.call,r=e.lo,a=e.l,o=e.r;return function(e){var i=function(i,u){return c(t(["state","animated"],[e(n(r(a(i),a("_value")),[o("state"),o("animated")]),n(r(a(u),a("_value")),[o("state"),o("animated")]))]))};return i.args=[["a","b"],o("a"),o("b")],i}}),J=o.context(function(e){return[e.add,e.sub,e.mul,e.div].map(N)}),q=J[0],R=J[1],z=J[2],P=J[3],M=["abs","mod","min","max","eq","ne","lt","lte","gt","gte"].map(o.context(function(e){var t=e.l,n=e.r,r=e.lo;return function(e){return i[e](c,function(e){return r(t(e),t("_value"))},["state","animated"],[n("state"),n("animated")])}})),F=M[0],L=M[1],B=M[2],T=M[3],C=M[4],I=M[5],W=M[6],U=M[7],D=M[8],G=M[9],H=[["fn"],u("fn")],K=o.context(function(e){var t=e.func,n=e.call,r=e.lo,a=e.l,o=e.or;return function(e){return c(t(["state","animated"],[n(r(a(e),a("_value")),[o(r(u("animated"),a("_begin")),r(u("animated"),a("begin"))),u("animated")])]))}});K.args=H;var Q=[["fn"],u("fn")],V=o.context(function(e){var t=e.func,n=e.call,r=e.lo,a=e.l,o=e.or;return function(e){return c(t(["state","animated"],[n(r(a(e),a("_value")),[o(r(u("animated"),a("_end")),r(u("animated"),a("end"))),u("animated")])]))}});V.args=Q;var X=[["a","op","b"],u("a"),o.context(function(e){var t=e.func,n=e.call,r=e.l,a=e.r,o=e.lo;return function(e,i){return c(t(["state","animated"],[n(o(n(r(a("op")),[e,i]),r("_value")),[a("state"),a("animated")])]))}}),o.context(function(e){var t=(e.func,e.call),n=e.l,r=e.r;e.lo;return function(e){return t(n(r("b")),[e])}})],Y=o.context(function(e){var t=e.func,n=e.call,r=e.lo,a=e.l,o=e.r;e.w;return function(e,i,u){return c(t(["state","animated"],[n(r(a(i(e,u(e))),a("_value")),[o("state"),o("animated")])]))}});Y.args=X;var Z=[["a","b"],u("a"),o.context(function(e){var t=e.func,n=e.call,r=e.l,a=e.r,o=e.lo;return function(e){return c(t(["state","animated"],[n(o(n(r(a("b")),[e]),r("_value")),[a("state"),a("animated")])]))}})],$=function(e,t){return Y(e,R,t)};$.args=Z;var ee=[["a","b"],u("a"),o.context(function(e){var t=e.func,n=e.call,r=e.l,a=e.r,o=e.lo;return function(e){return c(t(["state","animated"],[n(o(n(r(a("b")),[e]),r("_value")),[a("state"),a("animated")])]))}})],te=function(e,t){return Y(e,P,t)};te.args=ee;var ne=[["ary"],u("ary")],re=o.context(function(e){var t=e.func,n=e.w,r=e.l,a=e.for_of,o=e.add,i=e.r,u=e.call,l=e.or,s=e.lo;return function(e){return c(t(["state","animated"],[n("s",r("")),a(e,["i","fn"],[n("s",o(i("s"),u(l(s(i("fn"),r("_value")),i("fn")),[i("state"),i("animated")])))]),i("s")]))}});re.args=ne;var ae=function(e){return o.context(function(t){var n=t.func,r=t.w,a=t.l,o=t.for_of,i=t.add,u=t.call,l=t.or,s=t.lo,p=t.r,f=t.not_last;return function(t){return re([re([d(e),d("(")]),c(n(["state","animated"],[r("s",a("")),o(t,["i","fn"],[r("s",i(p("s"),u(l(s(p("fn"),a("_value")),p("fn")),[p("state"),p("animated")]))),r("s",i(p("s"),f(a(", "),a(""))))]),p("s")])),d(")")])}})},oe=["translate","translatex","translatey","translatez","translate3d","rotate","rotatex","rotatey","rotatez","rotate3d","scale","scalex","scaley","scalez","scale3d"].map(function(e){var t=ae(e);return t.args=[["ary"],u("ary")],t}),ie=oe[0],ue=oe[1],le=oe[2],ce=oe[3],se=oe[4],pe=oe[5],fe=oe[6],de=oe[7],me=oe[8],xe=oe[9],ve=oe[10],ye=oe[11],he=oe[12],ge=oe[13],be=oe[14],ke=[["o"],u("o")],_e=o.context(function(e){var t=e.methods,n=e.func,r=e.for_of,a=e.st,o=e.r,i=e.call,u=e.or,l=e.lo,c=e.l,s=e.w,p=e.branch;return function(e){return t({main:n(["element","state","animated"],[r(e,["key","value"],[p(l(o("value"),c("_value")),[a(o("element"),o("key"),i(o("value"),[l(o("element"),o("key")),o("state"),o("animated")]))],[p(i(o("value"),[l(o("element"),o("key")),o("state"),o("animated")]),[])])]),o("element")]),store:n(["state","element","animated"],[s("state",u(o("state"),c({}))),r(e,["key","value"],[a(o("state"),o("key"),i(l(o("value"),c("store")),[l(o("state"),o("key")),l(o("element"),o("key")),o("animated")]))]),o("state")]),restore:n(["element","state","animated"],[r(e,["key","value"],[p(l(o("value"),c("_value")),[a(o("element"),o("key"),i(l(o("value"),c("restore")),[l(o("element"),o("key")),l(o("state"),o("key")),o("animated")]))],[i(l(o("value"),c("restore")),[l(o("element"),o("key")),l(o("state"),o("key")),o("animated")])])]),o("element")])})}});_e.args=ke;var we=[["styles"],u("styles")],Oe=function(e){return _e({style:_e(e)})};Oe.args=we;var je=[["o"],u("o")],Se=o.context(function(e){var t=e.methods,n=e.func,r=e.for_of,a=e.st,o=e.r,i=e.call,u=e.or,l=e.lo,c=e.l,s=e.w;return function(e){return t({main:n(["element","state","animated"],[r(e,["key","value"],[s("_begin",u(l(o("animated"),c("_begin")),l(o("animated"),c("begin")))),a(o("animated"),c("_begin"),l(o("_begin"),o("key"))),s("_end",u(l(o("animated"),c("_end")),l(o("animated"),c("end")))),a(o("animated"),c("_end"),l(o("_end"),o("key"))),i(o("value"),[l(l(l(o("animated"),c("animated")),o("key")),c("element")),l(o("state"),o("key")),o("animated")]),a(o("animated"),c("_begin"),o("_begin")),a(o("animated"),c("_end"),o("_end"))]),o("element")]),store:n(["state","element","animated"],[s("state",u(o("state"),c({}))),r(e,["key","value"],[a(o("state"),o("key"),i(l(o("value"),c("store")),[l(o("state"),o("key")),l(l(l(o("animated"),c("animated")),o("key")),c("element")),o("animated")]))]),o("state")]),restore:n(["element","state","animated"],[r(e,["key","value"],[i(l(o("value"),c("restore")),[l(l(l(o("animated"),c("animated")),o("key")),c("element")),l(o("state"),o("key")),o("animated")])]),o("element")])})}});Se.args=je;var Ae=[["o"],u("o")],Ee=o.context(function(e){var t=e.methods,n=e.func,r=e.for_of,a=e.st,o=e.r,i=e.call,u=e.or,l=e.lo,c=e.l,s=e.w,p=e.branch,f=e.lt,d=e.add,m=e.loop;return function(e){return t({main:n(["element","state","animated"],[r(e,["key","value"],[s("_begin",u(l(o("animated"),c("_begin")),l(o("animated"),c("begin")))),a(o("animated"),c("_begin"),l(o("_begin"),o("key"))),s("_end",u(l(o("animated"),c("_end")),l(o("animated"),c("end")))),a(o("animated"),c("_end"),l(o("_end"),o("key"))),s("elements",l(l(l(o("animated"),c("animated")),o("key")),c("elements"))),s("state2",l(o("state"),o("key"))),s("i",c(0)),m(f(o("i"),l(o("elements"),c("length"))),[s("_begin2",u(l(o("animated"),c("_begin")),l(o("animated"),c("begin")))),a(o("animated"),c("_begin"),l(o("_begin2"),o("i"))),s("_end2",u(l(o("animated"),c("_end")),l(o("animated"),c("end")))),a(o("animated"),c("_end"),l(o("_end2"),o("i"))),i(o("value"),[l(o("elements"),o("i")),l(o("state2"),o("i")),o("animated")]),a(o("animated"),c("_begin"),o("_begin2")),a(o("animated"),c("_end"),o("_end2")),s("i",d(o("i"),c(1)))]),p(o("i"),[]),a(o("animated"),c("_begin"),o("_begin")),a(o("animated"),c("_end"),o("_end"))]),o("element")]),store:n(["state","element","animated"],[s("state",u(o("state"),c({}))),r(e,["key","value"],[s("elements",l(l(l(o("animated"),c("animated")),o("key")),c("elements"))),a(o("state"),o("key"),u(l(o("state"),o("key")),c([]))),s("state2",l(o("state"),o("key"))),s("i",c(0)),m(f(o("i"),l(o("elements"),c("length"))),[a(o("state2"),o("i"),i(l(o("value"),c("store")),[l(o("state2"),o("i")),l(o("elements"),o("i")),o("animated")])),s("i",d(o("i"),c(1)))]),p(o("i"),[])]),o("state")]),restore:n(["element","state","animated"],[r(e,["key","value"],[s("elements",l(l(l(o("animated"),c("animated")),o("key")),c("elements"))),s("state2",l(o("state"),o("key"))),s("i",c(0)),m(f(o("i"),l(o("elements"),c("length"))),[i(l(o("value"),c("restore")),[l(o("elements"),o("i")),l(o("state2"),o("i")),o("animated")]),s("i",d(o("i"),c(1)))]),p(o("i"),[])]),o("element")])})}});Ee.args=Ae;var Ne=[["o"],u("o")],Je=o.context(function(e){var t=e.methods,n=e.func,r=e.for_of,a=e.st,o=e.r,i=e.call,u=e.or,l=e.lo,c=e.l,s=e.w;return function(e){return t({main:n(["element","state","animated"],[r(e,["key","value"],[s("_begin",u(l(o("animated"),c("_begin")),l(o("animated"),c("begin")))),a(o("animated"),c("_begin"),l(o("_begin"),o("key"))),s("_end",u(l(o("animated"),c("_end")),l(o("animated"),c("end")))),a(o("animated"),c("_end"),l(o("_end"),o("key"))),i(o("value"),[o("element"),l(o("state"),o("key")),o("animated")]),a(o("animated"),c("_begin"),o("_begin")),a(o("animated"),c("_end"),o("_end"))]),o("element")]),store:n(["state","element","animated"],[r(e,["key","value"],[i(l(o("value"),c("store")),[o("state"),o("element"),o("animated")])]),o("state")]),restore:n(["element","state","animated"],[r(e,["key","value"],[i(l(o("value"),c("restore")),[o("element"),o("state"),o("animated")])]),o("element")])})}});Je.args=Ne,e.exports={value:c,union:p,constant:d,key:x,em:g,percent:b,deg:k,rad:_,px:w,rem:O,vh:j,vmax:S,vmin:A,vw:E,add:q,sub:R,mul:z,div:P,abs:F,mod:L,min:B,max:T,eq:C,ne:I,lt:W,lte:U,gt:D,gte:G,begin:K,end:V,against:Y,to:$,over:te,concat:re,translate:ie,translatex:ue,translatey:le,translatez:ce,translate3d:se,rotate:pe,rotatex:fe,rotatey:de,rotatez:me,rotate3d:xe,scale:ve,scalex:ye,scaley:he,scalez:ge,scale3d:be,properties:_e,style:Oe,styles:Oe,elements:Se,elementArrays:Ee,object:Je}}]));